{"version":3,"sources":["FormElement.js"],"names":["define","jQuery","document","ready","control","$","canvas","find","existingAreas","data","hiddenField","first","canvasObject","init","forEach","attr","configuration","on","ajax","shape","url","coords","global","alt","type","link","color","context","fieldName","uid","value","done","textStatus","itemFormElName","tableName","val","html"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAUC,GAC1GA,EAAMC,UAANC,MAAA,WACC,IAAAC,EAAWC,EAAGA,2BAAdC,EACCA,EAASF,KAAQG,iBADlBC,EAECA,EAAgBF,KAAOG,kBAFxBC,EAGCA,EAAcN,KAAQG,SAAKI,QAG3BC,EAAaC,IAAKP,mBAEnBE,EAAAA,KAAcM,EAAQC,KAAA,MAAUC,EAAAA,KAAe,oBAS9CR,EATDM,QAAA,SAAAE,GAWAN,EAAYO,QACXhB,IAAAA,OAAOiB,OAAKF,EAAAG,MAAA,SACXC,EAAUC,OACVC,EAAQC,IACRC,EAAMC,KACNhB,EAAMiB,MACLC,KAICC,EAAAA,GAAAA,SAAW,WACXC,EAAAA,KAAG,CACHC,IAAAA,MAAAA,SAAOpB,SAAPoB,iBALER,QAAA,EAFEE,KAAA,OAJKf,KAcTsB,CACFJ,QAAIK,UACH1B,EAAAA,CACA2B,eAAAvB,EAAAK,KAAA,QACDmB,UAlBD,aADDN,UAAA,oBApBDC,IAAA,MADDC,MAAApB,EAAAyB,UAoCMJ,KAAK,SAAUtB,EAAMuB,GACJ,YAAfA,GACH1B,EAAO8B,KAAK3B","file":"FormElement.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], function (jQuery) {\n\tjQuery(document).ready(function () {\n\t\tlet control = $('.imagemap-control:eq(0)'),\n\t\t\tcanvas = control.find('.canvas:eq(0)'),\n\t\t\texistingAreas = canvas.data('existing-areas'),\n\t\t\thiddenField = control.find('input').first(),\n\n\t\t\tcanvasObject = new previewCanvasClass();\n\t\t\tcanvasObject.init(canvas.attr('id'), canvas.data('thumbnail-scale'));\n\n\t\texistingAreas.forEach(function (configuration) {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\thiddenField.on('change', function () {\n\t\t\tjQuery.ajax({\n\t\t\t\turl: TYPO3.settings.ajaxUrls['imagemap_tceform'],\n\t\t\t\tglobal: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tcontext: 'tceform',\n\t\t\t\t\tP: {\n\t\t\t\t\t\titemFormElName: hiddenField.attr('name'),\n\t\t\t\t\t\ttableName: 'tt_content',\n\t\t\t\t\t\tfieldName: 'tx_imagemap_links',\n\t\t\t\t\t\tuid: 'uid',\n\t\t\t\t\t\tvalue: hiddenField.val()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).done(function (data, textStatus) {\n\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\tcanvas.html(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n"]}