{"version":3,"sources":["FormElement.js"],"names":["define","$","document","ready","$control","$canvas","find","canvasObject","previewCanvasClass","data","attr","forEach","configuration","window","$field","shape","coords","url","method","link","color","P","uid","value","this","ajax","TYPO3","settings","ajaxUrls","done","itemFormElName","tableName","fieldName","replace","val","textStatus","html"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAAC,GAChGA,EAACC,UAADC,MAAA,WACC,IAAAC,EAAYH,EAAGA,2BAAfI,EACCA,EAAUD,KAASE,WADpBC,EAECA,IAAYC,mBAIbH,EAAQI,KAAKJ,EAAAK,KAAb,MAA+BC,EAAQF,KAACG,oBASvCP,EATDI,KAAA,kBAAAE,QAAA,SAAAC,GAWAR,EAASE,QACR,IAAAO,OAAIC,OAAWF,EAAfG,MAAA,SACAd,EAAOe,OACNC,EAAKJ,IACLK,EAAQC,KACRV,EAAMW,MACLC,KAICC,EAAAA,KAAG,SAASZ,GAAP,mBAA4B,WACjCa,IAAAA,EAAAA,EAAKC,MALHvB,EAAAwB,KAAA,CADER,IAAAJ,OAAAa,MAAAC,SAAAC,SAAA,0BAHAV,OAYJW,OACFpB,KAAA,CACCJ,EAAAA,CACAyB,eAAAhB,EAAAJ,KAAA,QACDqB,UAhBD,aAFDC,UAAA,oBAlBDV,IAAAR,EAAAJ,KAAA,QAAAuB,QAAA,oBAAA,IAAAA,QAAA,uBAAA,IADDV,MAAAT,EAAAoB,UAiCML,KAAK,SAACpB,EAAM0B,GACK,YAAfA,GACH9B,EAAQ+B,KAAK3B","file":"FormElement.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], ($) => {\n\t$(document).ready(function () {\n\t\tlet $control = $('.imagemap-control:eq(0)'),\n\t\t\t$canvas = $control.find('.canvas'),\n\t\t\tcanvasObject = new previewCanvasClass();\n\n\t\tcanvasObject.init($canvas.attr('id'), $canvas.data('thumbnail-scale'));\n\n\t\t$canvas.data('existing-areas').forEach((configuration) => {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\t$control.find('input').on('imagemap:changed', function () {\n\t\t\tlet $field = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: window.TYPO3.settings.ajaxUrls['imagemap_preview_rerender'],\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tP: {\n\t\t\t\t\t\titemFormElName: $field.attr('name'),\n\t\t\t\t\t\ttableName: 'tt_content',\n\t\t\t\t\t\tfieldName: 'tx_imagemap_links',\n\t\t\t\t\t\tuid: $field.attr('name').replace('data[tt_content][', '').replace('][tx_imagemap_links]', ''),\n\t\t\t\t\t\tvalue: $field.val()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).done((data, textStatus) => {\n\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\t$canvas.html(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n"]}