{"version":3,"sources":["FormElement.js"],"names":["define","$","document","ready","$control","$canvas","find","canvasObject","previewCanvasClass","data","attr","forEach","area","window","$field","shape","ajax","url","method","P","uid","value","this","TYPO3","settings","ajaxUrls","done","fieldName","replace","val","textStatus","removeAreas","addArea","coords","alt","link","color"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAAC,GAChGA,EAACC,UAADC,MAAA,WACC,IAAAC,EAAYH,EAAGA,2BAAfI,EACCA,EAAUD,KAASE,WADpBC,EAECA,IAAYC,mBAIbH,EAAQI,KAAKJ,EAAAK,KAAb,MAA+BC,EAAQF,KAACG,oBASvCP,EATDI,KAAA,kBAAAE,QAAA,SAAAC,GAWAR,EAASE,QACR,IAAAO,OAAIC,OAAWF,EAAfG,MAAA,SACAd,EAAEe,OACDC,EAAAA,IACAC,EAAAA,KACAT,EAAAA,MACCU,KAICC,EAAAA,KAAG,SAASV,GAAP,mBAA4B,WACjCW,IAAAA,EAAAA,EAAKC,MALHrB,EAAAe,KAAA,CADEC,IAAAJ,OAAAU,MAAAC,SAAAC,SAAA,0BAHAP,OAYJQ,OACFjB,KAAA,CACCF,EAAAA,CACAE,eAAAK,EAAaJ,KAACE,QACbL,UAAAA,aAQAoB,UATD,oBAUAP,IAAAN,EAAAJ,KAAA,QAAAkB,QAAA,oBAAA,IAAAA,QAAA,uBAAA,IACDP,MA1BDP,EAAAe,UArBHH,KAAA,SAAAjB,EAAAqB,GAkCuB,YAAfA,IACHvB,EAAawB,cACbtB,EAAKE,QAAQ,SAACC,GACbL,EAAayB,QACZ,IAAInB,OAAO,OAASD,EAAKG,MAAQ,SACjCH,EAAKqB,OACLrB,EAAKsB,IACLtB,EAAKuB,KACLvB,EAAKwB,MACL","file":"FormElement.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], ($) => {\n\t$(document).ready(function () {\n\t\tlet $control = $('.imagemap-control:eq(0)'),\n\t\t\t$canvas = $control.find('.canvas'),\n\t\t\tcanvasObject = new previewCanvasClass();\n\n\t\tcanvasObject.init($canvas.attr('id'), $canvas.data('thumbnail-scale'));\n\n\t\t$canvas.data('existing-areas').forEach((area) => {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + area.shape + 'Class'](),\n\t\t\t\tarea.coords,\n\t\t\t\tarea.alt,\n\t\t\t\tarea.link,\n\t\t\t\tarea.color,\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\t$control.find('input').on('imagemap:changed', function () {\n\t\t\tlet $field = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: window.TYPO3.settings.ajaxUrls['imagemap_preview_rerender'],\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tP: {\n\t\t\t\t\t\titemFormElName: $field.attr('name'),\n\t\t\t\t\t\ttableName: 'tt_content',\n\t\t\t\t\t\tfieldName: 'tx_imagemap_links',\n\t\t\t\t\t\tuid: $field.attr('name').replace('data[tt_content][', '').replace('][tx_imagemap_links]', ''),\n\t\t\t\t\t\tvalue: $field.val()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).done((data, textStatus) => {\n\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\tcanvasObject.removeAreas();\n\t\t\t\t\tdata.forEach((area) => {\n\t\t\t\t\t\tcanvasObject.addArea(\n\t\t\t\t\t\t\tnew window['area' + area.shape + 'Class'](),\n\t\t\t\t\t\t\tarea.coords,\n\t\t\t\t\t\t\tarea.alt,\n\t\t\t\t\t\t\tarea.link,\n\t\t\t\t\t\t\tarea.color,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n"]}