{"version":3,"sources":["FormElement.js"],"names":["define","$","document","ready","$control","$canvas","find","canvasObject","previewCanvasClass","data","attr","forEach","configuration","window","$field","shape","coords","url","alt","global","link","type","color","tableName","on","fieldName","uid","value","done","context","textStatus","itemFormElName","val","html"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAAC,GAChGA,EAACC,UAADC,MAAA,WACC,IAAAC,EAAYH,EAAGA,2BAAfI,EACCA,EAAUD,KAASE,WADpBC,EAECA,IAAYC,mBAIbH,EAAQI,KAAKJ,EAAAK,KAAb,MAA+BC,EAAQF,KAACG,oBASvCP,EATDI,KAAA,kBAAAE,QAAA,SAAAC,GAWAR,EAASE,QACR,IAAAO,OAAIC,OAAWF,EAAfG,MAAA,SACAd,EAAOe,OACNC,EAAUC,IACVC,EAAQC,KACRC,EAAMC,MACNb,KAIEc,EAAAA,KAAAA,SAAWC,GAAA,mBAFT,WAGFC,IAAAA,EAAAA,EAAAA,MACAC,EAAAA,KAAAA,CACAC,IAAAA,MAAAA,SAAOb,SAAPa,iBALER,QAAA,EAFEE,KAAA,OAJAZ,KAcJmB,CACFC,QAAIC,UACHzB,EAAAA,CACA0B,eAAAjB,EAAAJ,KAAA,QACDa,UAlBD,aAFDE,UAAA,oBAlBDC,IAAA,MADDC,MAAAb,EAAAkB,UAmCMJ,KAAK,SAACnB,EAAMqB,GACK,YAAfA,GACHzB,EAAQ4B,KAAKxB","file":"FormElement.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], ($) => {\n\t$(document).ready(function () {\n\t\tlet $control = $('.imagemap-control:eq(0)'),\n\t\t\t$canvas = $control.find('.canvas'),\n\t\t\tcanvasObject = new previewCanvasClass();\n\n\t\tcanvasObject.init($canvas.attr('id'), $canvas.data('thumbnail-scale'));\n\n\t\t$canvas.data('existing-areas').forEach((configuration) => {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\t$control.find('input').on('imagemap:changed', function () {\n\t\t\tlet $field = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: TYPO3.settings.ajaxUrls['imagemap_tceform'],\n\t\t\t\tglobal: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tcontext: 'tceform',\n\t\t\t\t\tP: {\n\t\t\t\t\t\titemFormElName: $field.attr('name'),\n\t\t\t\t\t\ttableName: 'tt_content',\n\t\t\t\t\t\tfieldName: 'tx_imagemap_links',\n\t\t\t\t\t\tuid: 'uid',\n\t\t\t\t\t\tvalue: $field.val()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).done((data, textStatus) => {\n\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\t$canvas.html(data);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n"]}