{"version":3,"sources":["FormElement.js"],"names":["define","$","document","ready","$control","$canvas","find","canvasObject","previewCanvasClass","init","attr","data","forEach","area","addArea","window","shape","coords","alt","link","color","on","$field","ajax","url","TYPO3","settings","ajaxUrls","method","P","itemFormElName","tableName","fieldName","uid","replace","value","val","done","textStatus","removeAreas"],"mappings":"AAAAA,MAAA,CAAA,CAAA,QAAA,EAAA,oBAAA,EAAA,qBAAA,EAAA,+BAAA,CAAA,EAAA,UAAAC,CAAA,EAAA;AACAA,EAAAA,CAAA,CAAAC,QAAA,CAAA,CAAAC,KAAA,CAAA,YAAA;AACA,QAAAC,QAAA,GAAAH,CAAA,CAAA,yBAAA,CAAA;AAAA,QACAI,OAAA,GAAAD,QAAA,CAAAE,IAAA,CAAA,SAAA,CADA;AAAA,QAEAC,YAAA,GAAA,IAAAC,kBAAA,EAFA;AAIAD,IAAAA,YAAA,CAAAE,IAAA,CAAAJ,OAAA,CAAAK,IAAA,CAAA,IAAA,CAAA,EAAAL,OAAA,CAAAM,IAAA,CAAA,iBAAA,CAAA;AAEAN,IAAAA,OAAA,CAAAM,IAAA,CAAA,gBAAA,EAAAC,OAAA,CAAA,UAAAC,IAAA,EAAA;AACAN,MAAAA,YAAA,CAAAO,OAAA,CACA,IAAAC,MAAA,CAAA,SAAAF,IAAA,CAAAG,KAAA,GAAA,OAAA,CAAA,EADA,EAEAH,IAAA,CAAAI,MAFA,EAGAJ,IAAA,CAAAK,GAHA,EAIAL,IAAA,CAAAM,IAJA,EAKAN,IAAA,CAAAO,KALA,EAMA,CANA;AAQA,KATA;AAWAhB,IAAAA,QAAA,CAAAE,IAAA,CAAA,OAAA,EAAAe,EAAA,CAAA,kBAAA,EAAA,YAAA;AACA,UAAAC,MAAA,GAAArB,CAAA,CAAA,IAAA,CAAA;AACAA,MAAAA,CAAA,CAAAsB,IAAA,CAAA;AACAC,QAAAA,GAAA,EAAAT,MAAA,CAAAU,KAAA,CAAAC,QAAA,CAAAC,QAAA,CAAA,2BAAA,CADA;AAEAC,QAAAA,MAAA,EAAA,MAFA;AAGAjB,QAAAA,IAAA,EAAA;AACAkB,UAAAA,CAAA,EAAA;AACAC,YAAAA,cAAA,EAAAR,MAAA,CAAAZ,IAAA,CAAA,MAAA,CADA;AAEAqB,YAAAA,SAAA,EAAA,YAFA;AAGAC,YAAAA,SAAA,EAAA,mBAHA;AAIAC,YAAAA,GAAA,EAAAX,MAAA,CAAAZ,IAAA,CAAA,MAAA,EAAAwB,OAAA,CAAA,mBAAA,EAAA,EAAA,EAAAA,OAAA,CAAA,sBAAA,EAAA,EAAA,CAJA;AAKAC,YAAAA,KAAA,EAAAb,MAAA,CAAAc,GAAA;AALA;AADA;AAHA,OAAA,EAYAC,IAZA,CAYA,UAAA1B,IAAA,EAAA2B,UAAA,EAAA;AACA,YAAAA,UAAA,KAAA,SAAA,EAAA;AACA/B,UAAAA,YAAA,CAAAgC,WAAA;AACA5B,UAAAA,IAAA,CAAAC,OAAA,CAAA,UAAAC,IAAA,EAAA;AACAN,YAAAA,YAAA,CAAAO,OAAA,CACA,IAAAC,MAAA,CAAA,SAAAF,IAAA,CAAAG,KAAA,GAAA,OAAA,CAAA,EADA,EAEAH,IAAA,CAAAI,MAFA,EAGAJ,IAAA,CAAAK,GAHA,EAIAL,IAAA,CAAAM,IAJA,EAKAN,IAAA,CAAAO,KALA,EAMA,CANA;AAQA,WATA;AAUA;AACA,OA1BA;AA2BA,KA7BA;AA8BA,GAhDA;AAiDA,CAlDA,CAAA","file":"FormElement.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], ($) => {\n\t$(document).ready(function () {\n\t\tlet $control = $('.imagemap-control:eq(0)'),\n\t\t\t$canvas = $control.find('.canvas'),\n\t\t\tcanvasObject = new previewCanvasClass();\n\n\t\tcanvasObject.init($canvas.attr('id'), $canvas.data('thumbnail-scale'));\n\n\t\t$canvas.data('existing-areas').forEach((area) => {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + area.shape + 'Class'](),\n\t\t\t\tarea.coords,\n\t\t\t\tarea.alt,\n\t\t\t\tarea.link,\n\t\t\t\tarea.color,\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\t$control.find('input').on('imagemap:changed', function () {\n\t\t\tlet $field = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: window.TYPO3.settings.ajaxUrls['imagemap_preview_rerender'],\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tP: {\n\t\t\t\t\t\titemFormElName: $field.attr('name'),\n\t\t\t\t\t\ttableName: 'tt_content',\n\t\t\t\t\t\tfieldName: 'tx_imagemap_links',\n\t\t\t\t\t\tuid: $field.attr('name').replace('data[tt_content][', '').replace('][tx_imagemap_links]', ''),\n\t\t\t\t\t\tvalue: $field.val()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).done((data, textStatus) => {\n\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\tcanvasObject.removeAreas();\n\t\t\t\t\tdata.forEach((area) => {\n\t\t\t\t\t\tcanvasObject.addArea(\n\t\t\t\t\t\t\tnew window['area' + area.shape + 'Class'](),\n\t\t\t\t\t\t\tarea.coords,\n\t\t\t\t\t\t\tarea.alt,\n\t\t\t\t\t\t\tarea.link,\n\t\t\t\t\t\t\tarea.color,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n"]}