{"version":3,"sources":["FormElement.js"],"names":["define","$","$control","$canvas","find","canvasObject","previewCanvasClass","data","forEach","area","window","shape","url","method","P","uid","value","ajax","TYPO3","settings","ajaxUrls","fieldName","$field","attr","replace","val","done","textStatus","removeAreas","addArea","coords","alt","link","color"],"mappings":"AAAAA,OAAAA,CAAAA,SAAAA,qBAAAA,sBAAAA,iCAAAA,SAAAA,GACAC,EAAAA,UAAAA,MAAAA,WACA,IAAAC,EAAAD,EAAA,2BAAAE,EAAAD,EAAAE,KAAA,WAAAC,EAAA,IAAAC,mBAMAH,EAAAA,KAAAA,EAAAA,KAAAA,MAAAA,EAAAA,KAAAA,oBASAA,EAAAI,KAAA,kBAAAC,QAAA,SAAAC,GAEAP,EAAAA,QACA,IAAAQ,OAAA,OAAAD,EAAAE,MAAA,SACAV,EAAAA,OACAW,EAAAA,IACAC,EAAAA,KACAN,EAAAA,MACAO,KAIAC,EAAAA,KAAAA,SAAAA,GAAAA,mBAAAA,WACAC,IAAAA,EAAAA,EAAAA,MALAf,EAAAgB,KAAA,CADAL,IAAAF,OAAAQ,MAAAC,SAAAC,SAAA,0BAHAP,OAAA,OAaAN,KAAA,CACAF,EAAAA,CACAE,eAAAA,EAAAA,KAAAA,QACAF,UAAAA,aAQAgB,UAAA,oBACAN,IAAAO,EAAAC,KAAA,QAAAC,QAAA,oBAAA,IAAAA,QAAA,uBAAA,IACAR,MAAAM,EAAAG,UAGAC,KAAA,SAAAnB,EAAAoB,GAhBA,YAAAA,IACAtB,EAAAuB,cACArB,EAAAC,QAAA,SAAAC,GACAJ,EAAAwB,QACA,IAAAnB,OAAA,OAAAD,EAAAE,MAAA,SACAF,EAAAqB,OACArB,EAAAsB,IACAtB,EAAAuB,KACAvB,EAAAwB,MACA","file":"FormElement.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], ($) => {\n\t$(document).ready(function () {\n\t\tlet $control = $('.imagemap-control:eq(0)'),\n\t\t\t$canvas = $control.find('.canvas'),\n\t\t\tcanvasObject = new previewCanvasClass();\n\n\t\tcanvasObject.init($canvas.attr('id'), $canvas.data('thumbnail-scale'));\n\n\t\t$canvas.data('existing-areas').forEach((area) => {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + area.shape + 'Class'](),\n\t\t\t\tarea.coords,\n\t\t\t\tarea.alt,\n\t\t\t\tarea.link,\n\t\t\t\tarea.color,\n\t\t\t\t0\n\t\t\t);\n\t\t});\n\n\t\t$control.find('input').on('imagemap:changed', function () {\n\t\t\tlet $field = $(this);\n\t\t\t$.ajax({\n\t\t\t\turl: window.TYPO3.settings.ajaxUrls['imagemap_preview_rerender'],\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\tP: {\n\t\t\t\t\t\titemFormElName: $field.attr('name'),\n\t\t\t\t\t\ttableName: 'tt_content',\n\t\t\t\t\t\tfieldName: 'tx_imagemap_links',\n\t\t\t\t\t\tuid: $field.attr('name').replace('data[tt_content][', '').replace('][tx_imagemap_links]', ''),\n\t\t\t\t\t\tvalue: $field.val()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).done((data, textStatus) => {\n\t\t\t\tif (textStatus === 'success') {\n\t\t\t\t\tcanvasObject.removeAreas();\n\t\t\t\t\tdata.forEach((area) => {\n\t\t\t\t\t\tcanvasObject.addArea(\n\t\t\t\t\t\t\tnew window['area' + area.shape + 'Class'](),\n\t\t\t\t\t\t\tarea.coords,\n\t\t\t\t\t\t\tarea.alt,\n\t\t\t\t\t\t\tarea.link,\n\t\t\t\t\t\t\tarea.color,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t});\n});\n"]}