define(["jquery","./AreaEditor"],function(d,m){d(document).ready(function(){var e,t,a=d(".imagemap-control:eq(0)"),i=a.find(".image img"),n=a.find(".picture"),r={canvas:{width:parseInt(i.css("width")),height:parseInt(i.css("height")),top:-1*parseInt(i.css("height"))},previewRerenderAjaxUrl:window.TYPO3.settings.ajaxUrls.imagemap_preview_rerender},s=new m(r,"canvas");e=n.data("thumbnail-scale"),s.setScale(e),t=r,a.find("input[type=hidden]").on("imagemap:changed",function(e){var a=d(e.currentTarget);d.ajax({url:t.previewRerenderAjaxUrl,method:"POST",data:{P:{itemFormElName:a.attr("name"),tableName:"tt_content",fieldName:"tx_imagemap_links",uid:a.attr("name").replace("data[tt_content][","").replace("][tx_imagemap_links]",""),value:a.val()}}}).done(function(e,a){"success"===a&&(s.removeAllAreas(),s.initializeAreas(e))})}),s.initializeAreas(n.data("existing-areas"))})});
//# sourceMappingURL=FormElement.js.map
