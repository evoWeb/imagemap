{"version":3,"sources":["AreaEditor.js"],"names":["define","fabric","_fabric$Canvas","AreaEditor","canvas","picture","form","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","call","_inherits","Canvas","_createClass","key","value","scaling","width","parseInt","imageOrigW","height","imageOrigH","scaleFactor","jQuery","pictureId","getMaxW","getMaxH","that","areaObjects","c","setScale","updateCanvas","canvasId","console","log"],"mappings":"i5CAAAA,OAAA,CAAA,6BAAA,SAAAC,GAuBA,OAvBA,SAAAC,GAEA,SAAAC,EAAAC,EAAAC,EAAAC,GAAA,OAAAC,gBAAAC,KAAAL,GAAAM,2BAAAD,KAAAE,gBAAAP,GAAAQ,KAAAH,KACAJ,EAAAC,EAAAC,IAHA,OAAAM,UAAAT,EACAF,EAAAY,QADAC,aAAAX,EAAA,CAAA,CAAAY,IAAA,oBAAAC,MAAA,SAMAC,GACA,IAAAC,EAAAC,SAAAF,GAAAT,KAAAY,WACAC,EAAAF,SAAAF,GAAAT,KAAAc,WACA,OAAAD,EAAAH,EAAAG,EAAAH,IATA,CAAAH,IAAA,WAAAC,MAAA,SAWAC,GACAT,KAAAe,YAAA,EAAAN,EAAA,EAAAA,EACAO,OAAAhB,KAAAiB,UAAA,mBAAAP,MAAAV,KAAAkB,WACAF,OAAAhB,KAAAiB,UAAA,mBAAAJ,OAAAb,KAAAmB,WACAH,OAAAhB,KAAAiB,WAAAP,MAAAV,KAAAkB,WACAF,OAAAhB,KAAAiB,WAAAJ,OAAAb,KAAAmB,WACA,IAAAC,EAAApB,KAjBAR,OAAAA,KAAAA,KAAAA,eAAAA,SAAAA,EAAAA,GAAA4B,EAAAC,YAAAC,GAAAC,SAAAH,EAAAL,aAAAK,EAAAI,aAAAF,KAAAN,OAAAhB,KAAAyB,UAAAf,MAAAV,KAAAkB,WAAAL,OAAAb,KAAAmB,aAAA,CAAAZ,IAAA,UAAAC,MAAA,WAEA,OAAAR,KAAAe,YAAAf,KAAAY,aAFA,CAAAL,IAAA,UAAAC,MAAA,WAIA,OAAAR,KAAAe,YAAAf,KAAAc,aAJA,CAAAP,IAAA,iBAAAC,MAAA,WAAA,MAAA,KAAA,CAAAD,IAAA,YAAAC,MAAA,WAUAkB,QAAAC,QAVA,CAAApB,IAAA,UAAAC,MAAA,WAYAkB,QAAAC,QAZA,CAAApB,IAAA,YAAAC,MAAA,WAgBAQ,QAAAA,QAhBA,CAAAT,IAAA,WAAAC,MAAA,WAoBAY,QAAAA,UApBAzB,EAAA","file":"AreaEditor.js","sourcesContent":["define(['TYPO3/CMS/Imagemap/Fabric'], (fabric) => {\n\tclass AreaEditor extends fabric.Canvas {\n\t\tconstructor(canvas, picture, form) {\n\t\t\tsuper (canvas, picture, form);\n\t\t}\n\n\t\tinitializeScaling(scaling) {\n\t\t\tlet width = parseInt(scaling) / this.imageOrigW,\n\t\t\t\theight = parseInt(scaling) / this.imageOrigH;\n\t\t\treturn (width > height) ? height : width;\n\t\t}\n\t\tsetScale(scaling) {\n\t\t\tthis.scaleFactor = scaling > 1 ? 1 : scaling;\n\t\t\tjQuery(this.pictureId + \" > #image > img\").width(this.getMaxW());\n\t\t\tjQuery(this.pictureId + \" > #image > img\").height(this.getMaxH());\n\t\t\tjQuery(this.pictureId).width(this.getMaxW());\n\t\t\tjQuery(this.pictureId).height(this.getMaxH());\n\t\t\tlet that = this;\n\t\t\tjQuery.each(this.areaObjectList, function (d, c) {\n\t\t\t\tthat.areaObjects[c].setScale(that.scaleFactor);\n\t\t\t\tthat.updateCanvas(c)\n\t\t\t});\n\t\t\tjQuery(this.canvasId).width(this.getMaxW()).height(this.getMaxH())\n\t\t}\n\t\tgetMaxW() {\n\t\t\treturn this.scaleFactor * this.imageOrigW\n\t\t}\n\t\tgetMaxH () {\n\t\t\treturn this.scaleFactor * this.imageOrigH\n\t\t}\n\n\t\tpersistanceXML() {\n\t\t\treturn '';\n\t\t}\n\n\t\tmousedown() {\n\t\t\tconsole.log();\n\t\t}\n\n\t\tmouseup() {\n\t\t\tconsole.log();\n\t\t}\n\n\t\tmousemove() {\n\t\t\tconsole.log();\n\t\t}\n\n\t\tdblclick() {\n\t\t\tconsole.log();\n\t\t}\n\t}\n\treturn AreaEditor;\n});\n"]}