{"version":3,"sources":["AreaEditor.es6"],"names":["define","$","fabric","d","top","document","w","window","Aggregation","baseClass","mixins","base","args","forEach","mixin","copyProperties","target","source","propertySymbols","Object","getOwnPropertySymbols","getOwnPropertyNames","concat","property","match","defineProperty","getOwnPropertyDescriptor","prototype","AreaFormElement","id","__uid","hasOwnProperty","attributes","initializeElement","updateFields","initializeColorPicker","initializeEvents","element","getFormElement","name","form","areaZone","append","initializeArrows","getElement","minicolors","format","position","theme","changeDelay","change","colorPickerAction","bind","on","getElements","coordinateFieldHandler","attributeFieldHandler","buttonHandler","field","addEventListener","fieldKeyUpHandler","event","clearTimeout","eventDelay","wait","updateCanvas","updateProperties","button","classList","firstChild","lastChild","currentTarget","contains","link","value","openLinkBrowser","moveArea","remove","editor","deleteArea","showElement","hideElement","set","AreaEditor","hexToRgbA","canvas","renderAll","selector","template","querySelector","innerHTML","replace","RegExp","DOMParser","parseFromString","body","querySelectorAll","add","getAreaCoords","getAdditionalAttributes","getLink","join","result","push","length","callback","delay","setTimeout","Rect","color","alt","Math","floor","left","getScaledWidth","getScaledHeight","entries","attribute","parseInt","width","height","Circle","getRadiusX","radius","Poly","parentElement","points","point","index","x","y","split","control","controls","getCenterPoint","indexOf","setCoords","center","areaConfig","addControl","get","polygon","circle","hasControls","fill","cornerColor","stroke","cornerStrokeColor","originX","originY","type","pointMoved","currentTabId","firstPoint","lastPoint","parentNode","oldId","setAttribute","Polygon","AreaForm","formElement","areas","area","postAddToForm","offset","newIndex","parent","removedArea","splice","childNodes","blur","data","browseLink","objectId","itemName","currentValue","ajax","url","browseLinkUrlAjaxUrl","context","done","response","vHWin","open","focus","options","canvasSelector","formSelector","cornerSize","cornerStyle","hasBorders","hasRotatingPoint","transparentCorners","initializeOptions","Canvas","selection","preview","option","scaling","setZoom","getZoom","undefined","shape","addRect","addCircle","addPoly","deleteAction","configuration","getRandomColor","coords","right","bottom","selectable","strokeWidth","addArea","setControlVisible","coordsXY","i","Error","xy","min","objectCaching","addControls","syncAreaLinkValue","currentArea","xml","toAreaXml","r","random","toString","g","b","hex","alpha","chars","test","substring"],"mappings":"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","file":"AreaEditor.js","sourcesContent":["define([\n\t'jquery',\n\t'TYPO3/CMS/Imagemap/Fabric',\n\t'TYPO3/CMS/Imagemap/jquery.minicolors',\n\t'jquery-ui/draggable',\n\t'jquery-ui/resizable'\n], ($, fabric) => {\n\tlet d = top.document || document,\n\t\tw = top.window || window;\n\tif (typeof d !== 'undefined' && typeof w !== 'undefined') {\n\t\tfabric.document = d;\n\t\tfabric.window = w;\n\t}\n\n\tlet Aggregation = (baseClass, ...mixins) => {\n\t\tclass base extends baseClass {\n\t\t\tconstructor (...args) {\n\t\t\t\tsuper(...args);\n\t\t\t\tmixins.forEach((mixin) => {\n\t\t\t\t\tcopyProperties(this, (new mixin));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// this function copies all properties and symbols, filtering out some special ones\n\t\tlet copyProperties = (target, source) => {\n\t\t\t/** @type {Array} */\n\t\t\tlet propertySymbols = Object.getOwnPropertySymbols(source);\n\t\t\tObject.getOwnPropertyNames(source)\n\t\t\t\t.concat(propertySymbols)\n\t\t\t\t.forEach((property) => {\n\t\t\t\t\tif (!property.match(\n\t\t\t\t\t\t/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/\n\t\t\t\t\t)) {\n\t\t\t\t\t\tObject.defineProperty(target, property, Object.getOwnPropertyDescriptor(source, property));\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t};\n\n\t\t// outside constructor() to allow Aggregation(a, b, c).staticFunction() to be called etc.\n\t\tmixins.forEach((mixin) => {\n\t\t\tcopyProperties(base.prototype, mixin.prototype);\n\t\t\tcopyProperties(base, mixin);\n\t\t});\n\n\t\treturn base;\n\t};\n\n\tclass AreaFormElement extends fabric.Object {\n\t\t/**\n\t\t * @type {string}\n\t\t */\n\t\tname = '';\n\n\t\t/**\n\t\t * @type {ChildNode|HTMLElement}\n\t\t */\n\t\telement = null;\n\n\t\t/**\n\t\t * @type {AreaForm}\n\t\t */\n\t\tform = null;\n\n\t\t/**\n\t\t * @type {number}\n\t\t */\n\t\teventDelay = 0;\n\n\t\tpostAddToForm() {\n\t\t\tthis.id = fabric.Object.__uid++;\n\n\t\t\tif (!this.hasOwnProperty('attributes')) {\n\t\t\t\tthis.attributes = [];\n\t\t\t}\n\n\t\t\tthis.initializeElement();\n\t\t\tthis.updateFields();\n\t\t\tthis.initializeColorPicker();\n\t\t\tthis.initializeEvents();\n\t\t}\n\n\t\tinitializeElement() {\n\t\t\tthis.element = this.getFormElement('#' + this.name + 'Form');\n\t\t\tthis.form.areaZone.append(this.element);\n\t\t\tthis.form.initializeArrows();\n\t\t}\n\n\t\tinitializeColorPicker() {\n\t\t\t$(this.getElement('.t3js-color-picker')).minicolors({\n\t\t\t\tformat: 'hex',\n\t\t\t\tposition: 'left',\n\t\t\t\ttheme: 'default',\n\t\t\t\tchangeDelay: 100,\n\t\t\t\tchange: this.colorPickerAction.bind(this)\n\t\t\t});\n\t\t}\n\n\t\tinitializeEvents() {\n\t\t\tthis.on('moved', this.updateFields.bind(this));\n\t\t\tthis.on('modified', this.updateFields.bind(this));\n\n\t\t\tthis.getElements('.positionOptions .t3js-field').forEach(this.coordinateFieldHandler.bind(this));\n\t\t\tthis.getElements('.basicOptions .t3js-field, .attributes .t3js-field').forEach(this.attributeFieldHandler.bind(this));\n\t\t\tthis.getElements('.t3js-btn').forEach(this.buttonHandler.bind(this));\n\t\t}\n\n\t\tcoordinateFieldHandler(field) {\n\t\t\tfield.addEventListener('keyup', this.fieldKeyUpHandler.bind(this));\n\t\t}\n\n\t\tfieldKeyUpHandler(event) {\n\t\t\tclearTimeout(this.eventDelay);\n\t\t\tthis.eventDelay = AreaFormElement.wait(() => { this.updateCanvas(event); }, 500);\n\t\t}\n\n\t\tattributeFieldHandler(field) {\n\t\t\tfield.addEventListener('keyup', this.updateProperties.bind(this));\n\t\t}\n\n\t\tbuttonHandler(button) {\n\t\t\tbutton.addEventListener('click', this[button.id + 'Action'].bind(this));\n\t\t}\n\n\t\tinitializeArrows() {\n\t\t\tlet areaZone = this.form.areaZone;\n\t\t\tthis.getElement('#up').classList[areaZone.firstChild !== this.element ? 'remove' : 'add']('disabled');\n\t\t\tthis.getElement('#down').classList[areaZone.lastChild !== this.element ? 'remove' : 'add']('disabled');\n\t\t}\n\n\t\tupdateFields() {\n\t\t}\n\n\t\tupdateProperties(event) {\n\t\t\tlet field = event.currentTarget;\n\t\t\tif (field.classList.contains('link')) {\n\t\t\t\tthis.link = field.value;\n\t\t\t} else if (this.hasOwnProperty(field.id)) {\n\t\t\t\tthis[field.id] = field.value;\n\t\t\t} else if (this.attributes.hasOwnProperty(field.id)) {\n\t\t\t\tthis.attributes[field.id] = field.value;\n\t\t\t}\n\t\t}\n\n\t\tupdateCanvas() {\n\t\t}\n\n\n\t\tlinkAction(event) {\n\t\t\tthis.form.openLinkBrowser(event.currentTarget, this);\n\t\t}\n\n\t\tupAction() {\n\t\t\tthis.form.moveArea(this, -1);\n\t\t}\n\n\t\tdownAction() {\n\t\t\tthis.form.moveArea(this, 1);\n\t\t}\n\n\t\tundoAction() {\n\t\t}\n\n\t\tredoAction() {\n\t\t}\n\n\t\tdeleteAction() {\n\t\t\tif (this.element) {\n\t\t\t\tthis.element.remove();\n\t\t\t}\n\t\t\tif (this.form) {\n\t\t\t\tthis.form.initializeArrows();\n\t\t\t}\n\t\t\tthis.editor.deleteArea(this);\n\t\t\tdelete this;\n\t\t}\n\n\t\texpandAction() {\n\t\t\tthis.showElement('.moreOptions');\n\t\t\tthis.hideElement('#expand');\n\t\t\tthis.showElement('#collapse');\n\t\t}\n\n\t\tcollapseAction() {\n\t\t\tthis.hideElement('.moreOptions');\n\t\t\tthis.hideElement('#collapse');\n\t\t\tthis.showElement('#expand');\n\t\t}\n\n\t\tcolorPickerAction(value) {\n\t\t\tthis.getElement('.t3js-color-picker').value = value;\n\t\t\tthis.set('borderColor', value);\n\t\t\tthis.set('stroke', value);\n\t\t\tthis.set('fill', AreaEditor.hexToRgbA(value, 0.2));\n\t\t\tthis.editor.canvas.renderAll();\n\t\t}\n\n\n\t\tgetFormElement(selector, id) {\n\t\t\tlet template = this.form.element.querySelector(selector)\n\t\t\t\t.innerHTML.replace(new RegExp('_ID', 'g'), id ? id : this.id);\n\t\t\treturn new DOMParser().parseFromString(template, 'text/html').body.firstChild;\n\t\t}\n\n\t\tgetElement(selector) {\n\t\t\treturn this.element.querySelector(selector);\n\t\t}\n\n\t\tgetElements(selector) {\n\t\t\treturn this.element.querySelectorAll(selector);\n\t\t}\n\n\t\thideElement(selector) {\n\t\t\tthis.getElement(selector).classList.add('hide');\n\t\t}\n\n\t\tshowElement(selector) {\n\t\t\tthis.getElement(selector).classList.remove('hide');\n\t\t}\n\n\n\t\ttoAreaXml() {\n\t\t\treturn [\n\t\t\t\t'<area shape=\"' + this.name + '\"',\n\t\t\t\t' coords=\"' + this.getAreaCoords() + '\"',\n\t\t\t\tthis.getAdditionalAttributes() + '>',\n\t\t\t\tthis.getLink(),\n\t\t\t\t'</area>'\n\t\t\t].join('');\n\t\t}\n\n\t\tgetAreaCoords() {\n\t\t}\n\n\t\tgetAdditionalAttributes() {\n\t\t\tlet result = [];\n\n\t\t\tthis.getElements('.t3js-field').forEach((field) => {\n\t\t\t\tif (!field.classList.contains('ignored-attribute')) {\n\t\t\t\t\tresult.push(field.id + '=\"' + field.value + '\"');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn (result.length > 0 ? ' ' : '') + result.join(' ');\n\t\t}\n\n\t\tgetLink() {\n\t\t\treturn this.getElement('.link').value;\n\t\t}\n\n\t\tstatic wait(callback, delay) {\n\t\t\treturn window.setTimeout(callback, delay);\n\t\t}\n\t}\n\n\tclass Rect extends Aggregation(fabric.Rect, AreaFormElement) {\n\t\tname = 'rect';\n\n\t\tupdateFields() {\n\t\t\tthis.getElement('#color').value = this.color;\n\t\t\tthis.getElement('#alt').value = this.alt;\n\t\t\tthis.getElement('.link').value = this.link;\n\t\t\tthis.getElement('#left').value = Math.floor(this.left + 0);\n\t\t\tthis.getElement('#top').value = Math.floor(this.top + 0);\n\t\t\tthis.getElement('#right').value = Math.floor(this.left + this.getScaledWidth());\n\t\t\tthis.getElement('#bottom').value = Math.floor(this.top + this.getScaledHeight());\n\n\t\t\tObject.entries(this.attributes).forEach((attribute) => {\n\t\t\t\tthis.getElement('#' + attribute[0]).value = attribute[1];\n\t\t\t});\n\t\t}\n\n\t\tupdateCanvas(event) {\n\t\t\tlet field = event.currentTarget || event.target,\n\t\t\t\tvalue = 0;\n\n\t\t\tswitch (field.id) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tvalue = parseInt(field.value);\n\t\t\t\t\tthis.getElement('#right').value = value + this.getScaledWidth();\n\t\t\t\t\tthis.set({left: value});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'top':\n\t\t\t\t\tvalue = parseInt(field.value);\n\t\t\t\t\tthis.getElement('#bottom').value = value + this.getScaledHeight();\n\t\t\t\t\tthis.set({top: value});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'right':\n\t\t\t\t\tvalue = field.value - this.left;\n\t\t\t\t\tif (value < 0) {\n\t\t\t\t\t\tvalue = 10;\n\t\t\t\t\t\tfield.value = this.left + value;\n\t\t\t\t\t}\n\t\t\t\t\tthis.set({width: value});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bottom':\n\t\t\t\t\tvalue = field.value - this.top;\n\t\t\t\t\tif (value < 0) {\n\t\t\t\t\t\tvalue = 10;\n\t\t\t\t\t\tfield.value = this.top + value;\n\t\t\t\t\t}\n\t\t\t\t\tthis.set({height: value});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.canvas.renderAll();\n\t\t}\n\n\t\tgetAreaCoords() {\n\t\t\treturn [\n\t\t\t\tMath.floor(this.left + 0),\n\t\t\t\tMath.floor(this.top + 0),\n\t\t\t\tMath.floor(this.left + this.getScaledWidth() - 1),\n\t\t\t\tMath.floor(this.top + this.getScaledHeight() - 1)\n\t\t\t].join(',');\n\t\t}\n\t}\n\n\tclass Circle extends Aggregation(fabric.Circle, AreaFormElement) {\n\t\tname = 'circle';\n\n\t\tupdateFields() {\n\t\t\tthis.getElement('#color').value = this.color;\n\t\t\tthis.getElement('#alt').value = this.alt;\n\t\t\tthis.getElement('.link').value = this.link;\n\t\t\tthis.getElement('#left').value = Math.floor(this.left + 0);\n\t\t\tthis.getElement('#top').value = Math.floor(this.top + 0);\n\t\t\tthis.getElement('#radius').value = Math.floor(this.getRadiusX());\n\n\t\t\tObject.entries(this.attributes).forEach((attribute) => {\n\t\t\t\tthis.getElement('#' + attribute[0]).value = attribute[1];\n\t\t\t});\n\t\t}\n\n\t\tupdateCanvas(event) {\n\t\t\tlet field = event.currentTarget || event.target,\n\t\t\t\tvalue = 0;\n\n\t\t\tswitch (field.id) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tvalue = parseInt(field.value);\n\t\t\t\t\tthis.set({left: value});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'top':\n\t\t\t\t\tvalue = parseInt(field.value);\n\t\t\t\t\tthis.set({top: value});\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radius':\n\t\t\t\t\tvalue = parseInt(field.value);\n\t\t\t\t\tthis.set({radius: value});\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.canvas.renderAll();\n\t\t}\n\n\t\tgetAreaCoords() {\n\t\t\treturn [\n\t\t\t\tMath.floor(this.left + this.getRadiusX()),\n\t\t\t\tMath.floor(this.top + this.getRadiusX()),\n\t\t\t\tMath.floor(this.getRadiusX())\n\t\t\t].join(',');\n\t\t}\n\t}\n\n\tclass Poly extends Aggregation(fabric.Polygon, AreaFormElement) {\n\t\tname = 'poly';\n\n\t\tupdateFields() {\n\t\t\tthis.getElement('#color').value = this.color;\n\t\t\tthis.getElement('#alt').value = this.alt;\n\t\t\tthis.getElement('.link').value = this.link;\n\n\t\t\tObject.entries(this.attributes).forEach((attribute) => {\n\t\t\t\tthis.getElement('#' + attribute[0]).value = attribute[1];\n\t\t\t});\n\n\t\t\tlet parentElement = this.getElement('.positionOptions');\n\t\t\tthis.points.forEach((point, index) => {\n\t\t\t\tpoint.id = point.id ? point.id : 'p' + this.id + '_' + index;\n\n\t\t\t\tif (!point.hasOwnProperty('element')) {\n\t\t\t\t\tpoint.element = this.getFormElement('#polyCoords', point.id);\n\t\t\t\t\tparentElement.append(point.element);\n\t\t\t\t}\n\n\t\t\t\tpoint.element.querySelector('#x' + point.id).value = point.x;\n\t\t\t\tpoint.element.querySelector('#y' + point.id).value = point.y;\n\t\t\t});\n\t\t}\n\n\t\tupdateCanvas(event) {\n\t\t\tlet field = event.currentTarget || event.target,\n\t\t\t\t[, point] = field.id.split('_'),\n\t\t\t\tcontrol = this.controls[parseInt(point)],\n\t\t\t\tx = control.getCenterPoint().x,\n\t\t\t\ty = control.getCenterPoint().y;\n\n\t\t\tif (field.id.indexOf('x') > -1) {\n\t\t\t\tx = parseInt(field.value);\n\t\t\t}\n\t\t\tif (field.id.indexOf('y') > -1) {\n\t\t\t\ty = parseInt(field.value);\n\t\t\t}\n\n\t\t\tcontrol.set('left', x);\n\t\t\tcontrol.set('top', y);\n\t\t\tcontrol.setCoords();\n\t\t\tthis.points[control.name] = {x: x, y: y};\n\t\t\tthis.canvas.renderAll();\n\t\t}\n\n\t\tgetAreaCoords() {\n\t\t\tlet result = [];\n\n\t\t\tthis.controls.forEach((control) => {\n\t\t\t\tlet center = control.getCenterPoint();\n\t\t\t\tresult.push(center.x);\n\t\t\t\tresult.push(center.y);\n\t\t\t});\n\n\t\t\treturn result.join(',');\n\t\t}\n\n\t\t/**\n\t\t * @type {Array}\n\t\t */\n\t\tcontrols = [];\n\n\t\taddControls(areaConfig) {\n\t\t\tthis.points.forEach((point, index) => {\n\t\t\t\tthis.addControl(areaConfig, point, index);\n\t\t\t});\n\n\t\t\tthis.canvas.on('object:moving', (event) => {\n\t\t\t\tif (event.target.get('type') === 'control') {\n\t\t\t\t\tlet control = event.target,\n\t\t\t\t\t\tcenter = control.getCenterPoint();\n\t\t\t\t\tcontrol.polygon.points[control.name] = {\n\t\t\t\t\t\tx: center.x,\n\t\t\t\t\t\ty: center.y\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\taddControl(areaConfig, point, index) {\n\t\t\tlet circle = new fabric.Circle({\n\t\t\t\t...areaConfig,\n\t\t\t\thasControls: false,\n\t\t\t\tradius: 5,\n\t\t\t\tfill: areaConfig.cornerColor,\n\t\t\t\tstroke: areaConfig.cornerStrokeColor,\n\t\t\t\tleft: point.x,\n\t\t\t\ttop: point.y,\n\t\t\t\toriginX: 'center',\n\t\t\t\toriginY: 'center',\n\t\t\t\tname: index,\n\t\t\t\tpolygon: this,\n\t\t\t\ttype: 'control'\n\t\t\t});\n\t\t\tcircle.on('moved', this.pointMoved.bind(this));\n\t\t\tthis.controls[index] = circle;\n\t\t\tthis.canvas.add(circle);\n\t\t}\n\n\t\tpointMoved(event) {\n\t\t\tlet point = event.currentTabId || event.target,\n\t\t\t\tid = 'p' + point.polygon.id + '_' + point.name,\n\t\t\t\tcenter = point.getCenterPoint();\n\n\t\t\tthis.getElement('#x' + id).value = center.x;\n\t\t\tthis.getElement('#y' + id).value = center.y;\n\t\t}\n\n\t\taddPointAction() {\n\t\t\tlet index = this.points.length,\n\t\t\t\tfirstPoint = this.points[0],\n\t\t\t\tlastPoint = this.points[index - 1],\n\t\t\t\tid = 'p' + this.id + '_' + index,\n\t\t\t\tparentElement = this.getElement('.positionOptions'),\n\t\t\t\telement = this.getFormElement('#polyCoords', id),\n\t\t\t\tpoint = {\n\t\t\t\t\tx: (firstPoint.x + lastPoint.x) / 2,\n\t\t\t\t\ty: (firstPoint.y + lastPoint.y) / 2,\n\t\t\t\t\tid: id,\n\t\t\t\t\telement: element\n\t\t\t\t};\n\n\t\t\telement.querySelectorAll('.t3js-btn').forEach(this.buttonHandler.bind(this));\n\n\t\t\telement.querySelector('#x' + point.id).value = point.x;\n\t\t\telement.querySelector('#y' + point.id).value = point.y;\n\n\t\t\tparentElement.append(element);\n\n\t\t\tthis.points.push(point);\n\t\t\tthis.addControl(this.editor.areaConfig, point, index);\n\t\t}\n\n\t\tremovePointAction(event) {\n\t\t\tif (this.points.length > 3) {\n\t\t\t\tlet element = event.currentTarget.parentNode.parentNode,\n\t\t\t\t\tpoints = [],\n\t\t\t\t\tcontrols = [];\n\n\t\t\t\tthis.points.forEach((point, index) => {\n\t\t\t\t\tif (element.id !== point.id) {\n\t\t\t\t\t\tpoints.push(point);\n\t\t\t\t\t\tcontrols.push(this.controls[index]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpoint.element.remove();\n\t\t\t\t\t\tthis.canvas.remove(this.controls[index]);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tpoints.forEach((point, index) => {\n\t\t\t\t\tlet oldId = point.id;\n\t\t\t\t\tpoint.id = 'p' + this.id + '_' + index;\n\t\t\t\t\tthis.getElement('#' + oldId).id = point.id;\n\t\t\t\t\tthis.getElement('#x' + oldId).id = 'x' + point.id;\n\t\t\t\t\tthis.getElement('#y' + oldId).id = 'y' + point.id;\n\t\t\t\t\tthis.getElement('[for=\"x' + oldId + '\"]').setAttribute('for', 'x' + point.id);\n\t\t\t\t\tthis.getElement('[for=\"y' + oldId + '\"]').setAttribute('for', 'y' + point.id);\n\t\t\t\t\tcontrols[index].name = index;\n\t\t\t\t});\n\n\t\t\t\tthis.points = points;\n\t\t\t\tthis.controls = controls;\n\t\t\t\tthis.canvas.renderAll();\n\t\t\t}\n\t\t}\n\t}\n\n\tclass AreaForm {\n\t\t/**\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tareaZone = null;\n\n\t\t/**\n\t\t * @type {AreaEditor}\n\t\t */\n\t\teditor = null;\n\n\t\tconstructor(formElement, editor) {\n\t\t\tthis.element = editor.document.querySelector(formElement);\n\t\t\tthis.areaZone = this.element.querySelector('#areaZone');\n\t\t\tthis.editor = editor;\n\t\t}\n\n\t\tinitializeArrows() {\n\t\t\tthis.editor.areas.forEach((area) => {\n\t\t\t\tarea.initializeArrows();\n\t\t\t});\n\t\t}\n\n\t\taddArea(area) {\n\t\t\tarea.form = this;\n\t\t\tarea.postAddToForm();\n\t\t}\n\n\t\tmoveArea(area, offset) {\n\t\t\tlet index = this.editor.areas.indexOf(area),\n\t\t\t\tnewIndex = index + offset,\n\t\t\t\tparent = area.element.parentNode;\n\n\t\t\tif (newIndex > -1 && newIndex < this.editor.areas.length) {\n\t\t\t\tlet removedArea = this.editor.areas.splice(index, 1)[0];\n\t\t\t\tthis.editor.areas.splice(newIndex, 0, removedArea);\n\n\t\t\t\tparent.childNodes[index][offset < 0 ? 'after' : 'before'](parent.childNodes[newIndex]);\n\t\t\t}\n\n\t\t\tthis.initializeArrows();\n\t\t}\n\n\t\topenLinkBrowser(link, area) {\n\t\t\tlink.blur();\n\n\t\t\tlet data = {\n\t\t\t\t...this.editor.browseLink,\n\t\t\t\tobjectId: area.id,\n\t\t\t\titemName: 'link' + area.id,\n\t\t\t\tcurrentValue: area.getLink()\n\t\t\t};\n\n\t\t\t$.ajax({\n\t\t\t\turl: this.editor.browseLinkUrlAjaxUrl,\n\t\t\t\tcontext: area,\n\t\t\t\tdata: data\n\t\t\t}).done((response) => {\n\t\t\t\tlet vHWin = window.open(\n\t\t\t\t\tresponse.url,\n\t\t\t\t\t'',\n\t\t\t\t\t'height=600,width=500,status=0,menubar=0,scrollbars=1'\n\t\t\t\t);\n\t\t\t\tvHWin.focus()\n\t\t\t});\n\t\t}\n\n\t\tsyncAreaLinkValue(id) {\n\t\t\tthis.editor.areas.forEach((area) => {\n\t\t\t\tif (area.id === parseInt(id)) {\n\t\t\t\t\tarea.link = area.getElement('.link').value;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tclass AreaEditor {\n\t\tareaConfig = {\n\t\t\tcornerColor: '#eee',\n\t\t\tcornerStrokeColor: '#bbb',\n\t\t\tcornerSize: 10,\n\t\t\tcornerStyle: 'circle',\n\t\t\thasBorders: false,\n\t\t\thasRotatingPoint: false,\n\t\t\ttransparentCorners: false\n\t\t};\n\n\t\t/**\n\t\t * @type {HTMLElement}\n\t\t */\n\t\tdocument = null;\n\n\t\t/**\n\t\t * @type {string}\n\t\t */\n\t\tbrowseLinkUrlAjaxUrl = '';\n\n\t\t/**\n\t\t * @type {object}\n\t\t */\n\t\tbrowseLink = null;\n\n\t\t/**\n\t\t * @type {boolean}\n\t\t */\n\t\tpreview = true;\n\n\t\t/**\n\t\t * @type {Array}\n\t\t */\n\t\tareas = [];\n\n\t\tconstructor(options, canvasSelector, formSelector, document) {\n\t\t\tthis.initializeOptions(options);\n\t\t\tthis.document = document;\n\n\t\t\tthis.canvas = new fabric.Canvas(canvasSelector, {\n\t\t\t\t...options.canvas,\n\t\t\t\tselection: false\n\t\t\t});\n\n\t\t\tif (formSelector !== '') {\n\t\t\t\tthis.preview = false;\n\t\t\t\tthis.form = new AreaForm(formSelector, this);\n\t\t\t}\n\t\t}\n\n\t\tinitializeOptions(options) {\n\t\t\tfor (let option in options) {\n\t\t\t\tif (options.hasOwnProperty(option)) {\n\t\t\t\t\tthis[option] = options[option];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tsetScale(scaling) {\n\t\t\tthis.canvas.setZoom(this.canvas.getZoom() * (scaling ? scaling : 1));\n\t\t}\n\n\t\tinitializeAreas(areas) {\n\t\t\tif (areas !== undefined) {\n\t\t\t\tareas.forEach((area) => {\n\t\t\t\t\tswitch (area.shape) {\n\t\t\t\t\t\tcase 'rect':\n\t\t\t\t\t\t\tthis.addRect(area);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'circle':\n\t\t\t\t\t\t\tthis.addCircle(area);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'poly':\n\t\t\t\t\t\t\tthis.addPoly(area);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tremoveAllAreas() {\n\t\t\tthis.areas.forEach((area) => { area.deleteAction(); });\n\t\t}\n\n\t\taddRect(configuration) {\n\t\t\tconfiguration.color = AreaEditor.getRandomColor(configuration.color);\n\t\t\tlet [left, top, right, bottom] = configuration.coords.split(','),\n\t\t\t\tarea = new Rect({\n\t\t\t\t\t...configuration,\n\t\t\t\t\t...this.areaConfig,\n\t\t\t\t\tselectable: !this.preview,\n\t\t\t\t\thasControls: !this.preview,\n\t\t\t\t\tleft: parseInt(left),\n\t\t\t\t\ttop: parseInt(top),\n\t\t\t\t\twidth: right - left,\n\t\t\t\t\theight: bottom - top,\n\t\t\t\t\tstroke: configuration.color,\n\t\t\t\t\tstrokeWidth: 1,\n\t\t\t\t\tfill: AreaEditor.hexToRgbA(configuration.color, 0.3)\n\t\t\t\t});\n\n\t\t\tarea.editor = this;\n\t\t\tthis.canvas.add(area);\n\t\t\tthis.areas.push(area);\n\t\t\tif (this.form) {\n\t\t\t\tthis.form.addArea(area);\n\t\t\t}\n\t\t}\n\n\t\taddCircle(configuration) {\n\t\t\tconfiguration.color = AreaEditor.getRandomColor(configuration.color);\n\t\t\tlet [left, top, radius] = configuration.coords.split(','),\n\t\t\t\tarea = new Circle({\n\t\t\t\t\t...configuration,\n\t\t\t\t\t...this.areaConfig,\n\t\t\t\t\tselectable: !this.preview,\n\t\t\t\t\thasControls: !this.preview,\n\t\t\t\t\tleft: left - radius,\n\t\t\t\t\ttop: top - radius,\n\t\t\t\t\tradius: parseInt(radius),\n\t\t\t\t\tstroke: configuration.color,\n\t\t\t\t\tstrokeWidth: 1,\n\t\t\t\t\tfill: AreaEditor.hexToRgbA(configuration.color, 0.3)\n\t\t\t\t});\n\n\t\t\tarea.setControlVisible('ml', false);\n\t\t\tarea.setControlVisible('mt', false);\n\t\t\tarea.setControlVisible('mr', false);\n\t\t\tarea.setControlVisible('mb', false);\n\n\t\t\tarea.editor = this;\n\t\t\tthis.canvas.add(area);\n\t\t\tthis.areas.push(area);\n\t\t\tif (this.form) {\n\t\t\t\tthis.form.addArea(area);\n\t\t\t}\n\t\t}\n\n\t\taddPoly(configuration) {\n\t\t\tconfiguration.color = AreaEditor.getRandomColor(configuration.color);\n\t\t\tlet coordsXY = configuration.coords.split(','),\n\t\t\t\tleft = 100000,\n\t\t\t\ttop = 100000,\n\t\t\t\ti = 0,\n\t\t\t\tpoints = [];\n\n\t\t\tif (coordsXY.length % 2) {\n\t\t\t\tthrow new Error('Bad coords count');\n\t\t\t}\n\n\t\t\tfor (; i < coordsXY.length; i = i + 2) {\n\t\t\t\tlet xy = {x: parseInt(coordsXY[i]), y: parseInt(coordsXY[i + 1])};\n\t\t\t\tpoints.push(xy);\n\n\t\t\t\tleft = Math.min(left, xy.x);\n\t\t\t\ttop = Math.min(top, xy.y);\n\t\t\t}\n\n\t\t\tlet area = new Poly(points, {\n\t\t\t\t...configuration,\n\t\t\t\t...this.areaConfig,\n\t\t\t\tselectable: false,\n\t\t\t\tobjectCaching: false,\n\t\t\t\thasControls: !this.preview,\n\t\t\t\ttop: top,\n\t\t\t\tleft: left,\n\t\t\t\tstroke: configuration.color,\n\t\t\t\tstrokeWidth: 1,\n\t\t\t\tfill: AreaEditor.hexToRgbA(configuration.color, 0.3)\n\t\t\t});\n\n\t\t\tarea.editor = this;\n\t\t\tthis.canvas.add(area);\n\t\t\tthis.areas.push(area);\n\t\t\tif (this.form) {\n\t\t\t\tarea.addControls(this.areaConfig);\n\t\t\t\tthis.form.addArea(area);\n\t\t\t}\n\t\t}\n\n\t\ttriggerAreaLinkUpdate(id) {\n\t\t\tthis.form.syncAreaLinkValue(id);\n\t\t}\n\n\t\tdeleteArea(area) {\n\t\t\tlet areas = [];\n\t\t\tthis.areas.forEach((currentArea) => {\n\t\t\t\tif (area !== currentArea) {\n\t\t\t\t\tareas.push(currentArea);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.areas = areas;\n\t\t\tthis.canvas.remove(area);\n\t\t}\n\n\t\ttoAreaXml() {\n\t\t\tlet xml = ['<map>'];\n\t\t\tthis.areas.forEach((area) => {\n\t\t\t\txml.push(area.toAreaXml());\n\t\t\t});\n\t\t\txml.push('</map>');\n\t\t\treturn xml.join(\"\\n\");\n\t\t}\n\n\t\tstatic getRandomColor(color) {\n\t\t\tif (color === undefined) {\n\t\t\t\tlet r = (Math.floor(Math.random() * 5) * 3).toString(16),\n\t\t\t\t\tg = (Math.floor(Math.random() * 5) * 3).toString(16),\n\t\t\t\t\tb = (Math.floor(Math.random() * 5) * 3).toString(16);\n\t\t\t\tcolor = '#' + r + r + g + g + b + b;\n\t\t\t}\n\t\t\treturn color;\n\t\t}\n\n\t\tstatic hexToRgbA(hex, alpha) {\n\t\t\tlet chars, r, g, b, result;\n\t\t\tif (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\n\t\t\t\tchars = hex.substring(1).split('');\n\t\t\t\tif (chars.length === 3) {\n\t\t\t\t\tchars = [chars[0], chars[0], chars[1], chars[1], chars[2], chars[2]];\n\t\t\t\t}\n\n\t\t\t\tr = parseInt(chars[0] + chars[1], 16);\n\t\t\t\tg = parseInt(chars[2] + chars[3], 16);\n\t\t\t\tb = parseInt(chars[4] + chars[5], 16);\n\n\t\t\t\tif (alpha) {\n\t\t\t\t\tresult = 'rgba(' + [r, g, b, alpha].join(', ') + ')';\n\t\t\t\t} else {\n\t\t\t\t\tresult = 'rgb(' + [r, g, b].join(', ') + ')';\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tthrow new Error('Bad Hex');\n\t\t}\n\t}\n\n\treturn AreaEditor;\n});\n\n"]}