function _objectSpread(n){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},t=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),t.forEach(function(e){_defineProperty(n,e,i[e])})}return n}function _defineProperty(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}define(["jquery","TYPO3/CMS/Imagemap/AreaEditor","jquery-ui/sortable","jquery-ui/draggable"],function(r,l){r(document).ready(function(){var e=window.imagemap,n=e.defaultAttributeset,i=e.scaleFactor,t=r("> .zout","#magnify"),o=r("> .zin","#magnify"),a=new l("canvas","picture","areaForms");function c(e){a.add(new window["area"+e+"Class"],"","","","",1,n)}i=a.initializeScaling(i),a.setScale(i),e.areaEditor=a,e.existingAreas.forEach(function(e){var n=e.coords.split(","),i=n.left,t=n.top,o=n.width,c=n.height,r=new window.fabric[e.shape](_objectSpread({},e,{originX:"left",originY:"top",top:t,left:i,width:o,height:c,fill:e.color}));a.add(r)}),i<1||o.hide(),t.hide(),o.click(function(){a.setScale(1),r(this).hide(),t.show()}),t.click(function(){a.setScale(i),r(this).hide(),o.show()}),r("#addRect").on("click",function(){c("Rect")}),r("#addPoly").on("click",function(){c("Poly")}),r("#addCircle").on("click",function(){c("Circle")}),r("#submit").on("click",function(){window.opener.$('input[name="'+e.itemName+'"]').val("<map>"+a.persistanceXML()+"</map>").trigger("imagemap:changed"),close()}),r("#canvas").on("mousedown",a.mousedown.bind(a)).on("mouseup",a.mouseup.bind(a)).on("mousemove",a.mousemove.bind(a)).on("dblclick",a.dblclick.bind(a))})});
//# sourceMappingURL=Wizard.js.map
