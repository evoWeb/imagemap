{"version":3,"sources":["Wizard.es6"],"names":["define","$","AreaEditor","document","ready","configuration","window","imagemap","$image","$canvas","editorOptions","canvas","width","parseInt","css","height","top","areaEditor","scaleFactor","$magnify","$zoomOut","$zoomIn","data","find","setScale","removeClass","click","hide","show","on","addRect","coords","addCircle","addPoly","opener","itemName","val","toAreaXml","trigger","close","initializeAreas","existingAreas"],"mappings":"AAAAA,OAAA,CACA,SACA,iCACA,SAAAC,EAAAC,GACAD,EAAAE,UAAAC,MAAA,WACA,IAAAC,EAAAC,OAAAC,SACAC,EAAAP,EAAA,cACAQ,EAAAR,EAAA,YACAS,EAAA,CACAC,OAAA,CACAC,MAAAC,SAAAL,EAAAM,IAAA,UACAC,OAAAF,SAAAL,EAAAM,IAAA,WACAE,KAAA,EAAAH,SAAAL,EAAAM,IAAA,aAGAG,EAAA,IAAAf,EAAAQ,EAAA,SAAA,cAEAL,EAAAY,WAAAA,EAEA,IAAAC,EACAC,EACAC,EACAC,EAHAH,EAuDAT,EAAAa,KAAA,gBAtDAH,EAAAlB,EAAA,YACAmB,EAAAD,EAAAI,KAAA,YACAF,EAAAF,EAAAI,KAAA,WAEAN,EAAAO,WAEAN,EAAA,IACAG,EAAAI,YAAA,QAEAJ,EAAAK,MAAA,WACAT,EAAAO,SAAA,GACAH,EAAAM,OACAP,EAAAQ,SAGAR,EAAAM,MAAA,WACAT,EAAAO,SAAAN,GACAE,EAAAO,OACAN,EAAAO,UAMA3B,EAAA,YAAA4B,GAAA,QAAA,WACAZ,EAAAa,QAAA,CACAC,OAAAlB,SAAAL,EAAAM,IAAA,UAAA,EAAA,GAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,IACA,KAAAD,SAAAL,EAAAM,IAAA,UAAA,EAAA,IAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,QAIAb,EAAA,cAAA4B,GAAA,QAAA,WACAZ,EAAAe,UAAA,CACAD,OAAAlB,SAAAL,EAAAM,IAAA,UAAA,EAAA,GAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,IAAA,UAIAb,EAAA,YAAA4B,GAAA,QAAA,WACAZ,EAAAgB,QAAA,CACAF,OAAAlB,SAAAL,EAAAM,IAAA,UAAA,EAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,IACA,KAAAD,SAAAL,EAAAM,IAAA,UAAA,EAAA,IAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,IACA,IAAAD,SAAAL,EAAAM,IAAA,UAAA,EAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,IACA,KAAAD,SAAAL,EAAAM,IAAA,UAAA,EAAA,IAAA,KAAAD,SAAAL,EAAAM,IAAA,WAAA,EAAA,QAIAb,EAAA,WAAA4B,GAAA,QAAA,WACAvB,OAAA4B,OAAAjC,EAAA,eAAAI,EAAA8B,SAAA,MACAC,IAAAnB,EAAAoB,aACAC,QAAA,oBACAC,UAMAtB,EAAAuB,gBAAAnC,EAAAoC","file":"Wizard.js","sourcesContent":["define([\n\t'jquery',\n\t'TYPO3/CMS/Imagemap/AreaEditor'\n], ($, AreaEditor) => {\n\t$(document).ready(() => {\n\t\tlet configuration = window.imagemap,\n\t\t\t$image = $('.image img'),\n\t\t\t$canvas = $('.picture'),\n\t\t\teditorOptions = {\n\t\t\t\tcanvas: {\n\t\t\t\t\twidth: parseInt($image.css('width')),\n\t\t\t\t\theight: parseInt($image.css('height')),\n\t\t\t\t\ttop: parseInt($image.css('height')) * -1,\n\t\t\t\t}\n\t\t\t},\n\t\t\tareaEditor = new AreaEditor(editorOptions, 'canvas', '#areasForm');\n\n\t\tconfiguration.areaEditor = areaEditor;\n\n\t\tlet initializeScaleFactor = (scaleFactor) => {\n\t\t\tlet $magnify = $('#magnify'),\n\t\t\t\t$zoomOut = $magnify.find('.zoomout'),\n\t\t\t\t$zoomIn = $magnify.find('.zoomin');\n\n\t\t\tareaEditor.setScale();\n\n\t\t\tif (scaleFactor < 1) {\n\t\t\t\t$zoomIn.removeClass('hide');\n\n\t\t\t\t$zoomIn.click(() => {\n\t\t\t\t\tareaEditor.setScale(1);\n\t\t\t\t\t$zoomIn.hide();\n\t\t\t\t\t$zoomOut.show();\n\t\t\t\t});\n\n\t\t\t\t$zoomOut.click(() => {\n\t\t\t\t\tareaEditor.setScale(scaleFactor);\n\t\t\t\t\t$zoomOut.hide();\n\t\t\t\t\t$zoomIn.show();\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tlet initializeEvents = () => {\n\t\t\t$('#addRect').on('click', () => {\n\t\t\t\tareaEditor.addRect({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 - 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 + 50) + ',' + (parseInt($image.css('height')) / 2 + 50),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#addCircle').on('click', () => {\n\t\t\t\tareaEditor.addCircle({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 - 50) + ',50',\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#addPoly').on('click', () => {\n\t\t\t\tareaEditor.addPoly({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2) + ',' + (parseInt($image.css('height')) / 2 - 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 + 50) + ',' + (parseInt($image.css('height')) / 2 + 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2) + ',' + (parseInt($image.css('height')) / 2 + 70)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 + 50)\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#submit').on('click', () => {\n\t\t\t\twindow.opener.$('input[name=\"' + configuration.itemName + '\"]')\n\t\t\t\t\t.val(areaEditor.toAreaXml())\n\t\t\t\t\t.trigger('imagemap:changed');\n\t\t\t\tclose();\n\t\t\t});\n\t\t};\n\n\t\tinitializeScaleFactor($canvas.data('scale-factor'));\n\t\tinitializeEvents();\n\t\tareaEditor.initializeAreas(configuration.existingAreas);\n\t});\n});\n"]}