{"version":3,"sources":["Wizard.js"],"names":["define","jQuery","document","ready","configuration","window","defaultAttributeSet","canvasObject","canvasClass","scaleFactor","zoomOut","zoomIn","init","initializeScaling","existingAreas","forEach","addArea","shape","coords","alt","link","color","prepend","attribute","hide","this","show","click","setScale","on","close","areaRectClass","itemName","mousedown","areaPolyClass","dblclick","opener","val","persistanceXML","e","mouseup","mousemove"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAUC,GAC1GA,EAAMC,UAANC,MAAA,WACC,IAAAC,EAAiBC,OAAGA,SAApBC,EACCA,EAAsBF,oBADvBG,EAECA,IAAYC,YAFbC,EAGCA,EAAcL,YAHfM,EAICA,EAAUT,UAAO,YAJlBU,EAKCA,EAASV,SAAO,YAGjBQ,EAAWG,KAAGL,SAAY,UAACM,aAC3BN,EAAYA,EAAUE,kBAAtBA,GACAL,EAAAA,SAAcG,GAEdH,EAAAA,aAAAG,EAUCH,EAVDU,cAAAC,QAAA,SAAAX,GACCG,EAAaS,QAWd,IAAIP,OAAAA,OAAJL,EAAqBa,MAAA,SACpBP,EAAAQ,OACAd,EAAMe,IACNR,EAAAS,KACAV,EAAAW,MACAjB,EAAAkB,QATClB,EAAcmB,aAcfb,EAAA,GAIAH,EAAAA,OAHAG,EAJDc,OAYAvB,EAAAA,MAAO,WACNM,EAAAA,SAAaS,GACbf,EAAAwB,MAAOD,OACPd,EAHDgB,SAOChB,EAAAiB,MAAO,WACPpB,EAHDqB,SAAAnB,GAKAR,EAAMwB,MAACD,OACNjB,EAAAA,SAIDN,EAAAA,YAAA4B,GAAA,QAAA,WAGCC,OAFA7B,EAAOe,QAAA,IAAAe,cAA+BC,GAAAA,GAA/B,GAA0C,GAAM3B,EAAAA,IAEvDyB,IAKC7B,EAAA,YAAOM,GAAAA,QAAa0B,WAGrB,OAFC1B,EACGS,QAAW,IAAAkB,cAAa,GAAA,GAAA,GAAA,GAAA,EAAA5B,IAC5B,IAIAL,EATD,cAUiB4B,GAAA,QAAa,WAE7B,OADAtB,EAAOA,QAAAA,IAAa4B,gBAApB,GAAA,GAAA,GAAA,GAAA,EAAA7B,IAXD,IANAL,EAAO,WAAW4B,GAAG,QAAS,WAC7B5B,EAAO,eAAiBG,EAAc4B,SAAW,KAAM3B,OAAO+B,OAAOlC,UACnEmC,IAAI,QAAU9B,EAAa+B,iBAAmB,UAChDR,UAGD7B,EAAO,WACL4B,GAAG,YAAa,SAAUU,GAC1B,OAAOhC,EAAa0B,UAAUM,KAE9BV,GAAG,UAAW,SAAUU,GACzB,OAAOhC,EAAaiC,QAAQD,KAE3BV,GAAG,YAAa,SAAUU,GAC3B,OAAOhC,EAAakC,UAAUF,KAE7BV,GAAG,WAAY,SAAUU,GAC1B,OAAOhC,EAAa4B,SAASI","file":"Wizard.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], function (jQuery) {\n\tjQuery(document).ready(function () {\n\t\tlet configuration = window.imagemap,\n\t\t\tdefaultAttributeSet = configuration.defaultAttributeset,\n\t\t\tcanvasObject = new canvasClass(),\n\t\t\tscaleFactor = configuration.scaleFactor,\n\t\t\tzoomOut = jQuery('> .zout', '#magnify'),\n\t\t\tzoomIn = jQuery('> .zin', '#magnify');\n\n\t\tcanvasObject.init('canvas', 'picture', 'areaForms');\n\t\tscaleFactor = canvasObject.initializeScaling(scaleFactor);\n\t\tcanvasObject.setScale(scaleFactor);\n\t\tconfiguration.canvasObject = canvasObject;\n\n\t\tconfiguration.existingAreas.forEach(function (configuration) {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\tconfiguration.prepend,\n\t\t\t\tconfiguration.attribute\n\t\t\t);\n\t\t});\n\n\t\tif (scaleFactor < 1) {\n\t\t\tzoomOut.hide();\n\t\t} else {\n\t\t\tzoomIn.hide();\n\t\t\tzoomOut.hide();\n\t\t}\n\n\t\tzoomIn.click(function () {\n\t\t\tcanvasObject.setScale(1);\n\t\t\tjQuery(this).hide();\n\t\t\tzoomOut.show();\n\t\t});\n\n\t\tzoomOut.click(function () {\n\t\t\tcanvasObject.setScale(scaleFactor);\n\t\t\tjQuery(this).hide();\n\t\t\tzoomIn.show();\n\t\t});\n\n\t\tjQuery('#addRect').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaRectClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t\treturn false;\n\t\t});\n\n\t\tjQuery('#addPoly').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaPolyClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t\treturn false;\n\t\t});\n\n\t\tjQuery('#addCircle').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaCircleClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t\treturn false;\n\t\t});\n\n\t\tjQuery('#submit').on('click', function () {\n\t\t\tjQuery('input[name=\"' + configuration.itemName + '\"]', window.opener.document)\n\t\t\t\t.val('<map>' + canvasObject.persistanceXML() + '</map>');\n\t\t\tclose();\n\t\t});\n\n\t\tjQuery('#canvas')\n\t\t\t.on('mousedown', function (e) {\n\t\t\t\treturn canvasObject.mousedown(e);\n\t\t\t})\n\t\t\t.on('mouseup', function (e) {\n\t\t\treturn canvasObject.mouseup(e);\n\t\t})\n\t\t\t.on('mousemove', function (e) {\n\t\t\treturn canvasObject.mousemove(e);\n\t\t})\n\t\t\t.on('dblclick', function (e) {\n\t\t\treturn canvasObject.dblclick(e);\n\t\t});\n\t});\n});\n"]}