{"version":3,"sources":["Wizard.es6"],"names":["define","$","AreaEditor","document","ready","configuration","window","imagemap","$image","editorConfig","canvas","width","parseInt","css","height","top","areaEditor","initializeScaleFactor","$magnify","$zoomOut","find","$zoomIn","scaleFactor","initializeScaling","data","setScale","removeClass","addClass","click","hide","show","initializeAreas","areas","forEach","shape","addRect","addCircle","addPoly","initializeEvents","on","coords","opener","itemName","val","toAreaXml","trigger","close","existingAreas"],"mappings":"AAAAA,MAAA,CAAA,CACA,QADA,EAEA,+BAFA,EAGA,oBAHA,EAIA,qBAJA,CAAA,EAKA,UAAAC,CAAA,EAAAC,UAAA,EAAA;AACAD,EAAAA,CAAA,CAAAE,QAAA,CAAA,CAAAC,KAAA,CAAA,YAAA;AACA,QAAAC,aAAA,GAAAC,MAAA,CAAAC,QAAA;AAAA,QACAC,MAAA,GAAAP,CAAA,CAAA,YAAA,CADA;AAAA,QAEAQ,YAAA,GAAA;AACAC,MAAAA,MAAA,EAAA;AACAC,QAAAA,KAAA,EAAAC,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CADA;AAEAC,QAAAA,MAAA,EAAAF,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAFA;AAGAE,QAAAA,GAAA,EAAAH,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA;AAHA;AADA,KAFA;AAAA,QASAG,UAAA,GAAA,IAAAd,UAAA,CACA,QADA,EAEA,YAFA,EAGAO,YAHA,CATA;AAeAJ,IAAAA,aAAA,CAAAW,UAAA,GAAAA,UAAA;;AAEA,QAAAC,qBAAA,GAAA,SAAAA,qBAAA,GAAA;AACA,UAAAC,QAAA,GAAAjB,CAAA,CAAA,UAAA,CAAA;AAAA,UACAkB,QAAA,GAAAD,QAAA,CAAAE,IAAA,CAAA,UAAA,CADA;AAAA,UAEAC,OAAA,GAAAH,QAAA,CAAAE,IAAA,CAAA,SAAA,CAFA;AAAA,UAGAE,WAAA,GAAAN,UAAA,CAAAO,iBAAA,CAAAL,QAAA,CAAAM,IAAA,CAAA,cAAA,CAAA,CAHA;AAKAR,MAAAA,UAAA,CAAAS,QAAA,CAAAH,WAAA;;AAEA,UAAAA,WAAA,GAAA,CAAA,EAAA;AACAD,QAAAA,OAAA,CAAAK,WAAA,CAAA,MAAA;AACAP,QAAAA,QAAA,CAAAQ,QAAA,CAAA,MAAA;AACA,OAHA,MAGA;AACAN,QAAAA,OAAA,CAAAM,QAAA,CAAA,MAAA;AACAR,QAAAA,QAAA,CAAAQ,QAAA,CAAA,MAAA;AACA;;AAEAN,MAAAA,OAAA,CAAAO,KAAA,CAAA,YAAA;AACAZ,QAAAA,UAAA,CAAAS,QAAA,CAAA,CAAA;AACAJ,QAAAA,OAAA,CAAAQ,IAAA;AACAV,QAAAA,QAAA,CAAAW,IAAA;AACA,OAJA;AAMAX,MAAAA,QAAA,CAAAS,KAAA,CAAA,YAAA;AACAZ,QAAAA,UAAA,CAAAS,QAAA,CAAAH,WAAA;AACAH,QAAAA,QAAA,CAAAU,IAAA;AACAR,QAAAA,OAAA,CAAAS,IAAA;AACA,OAJA;AAKA,KA3BA;;AA6BA,QAAAC,eAAA,GAAA,SAAAA,eAAA,CAAAC,KAAA,EAAA;AACAA,MAAAA,KAAA,CAAAC,OAAA,CAAA,UAAA5B,aAAA,EAAA;AACA,gBAAAA,aAAA,CAAA6B,KAAA;AACA,eAAA,MAAA;AACAlB,YAAAA,UAAA,CAAAmB,OAAA,CAAA9B,aAAA;AACA;;AAEA,eAAA,QAAA;AACAW,YAAAA,UAAA,CAAAoB,SAAA,CAAA/B,aAAA;AACA;;AAEA,eAAA,MAAA;AACAW,YAAAA,UAAA,CAAAqB,OAAA,CAAAhC,aAAA;AACA;AAXA;AAaA,OAdA;AAeA,KAhBA;;AAkBA,QAAAiC,gBAAA,GAAA,SAAAA,gBAAA,GAAA;AACArC,MAAAA,CAAA,CAAA,UAAA,CAAA,CAAAsC,EAAA,CAAA,OAAA,EAAA,YAAA;AACAvB,QAAAA,UAAA,CAAAmB,OAAA,CAAA;AACAK,UAAAA,MAAA,EAAA5B,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAAA,GAAA,GAAA,IAAAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IACA,GADA,IACAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EADA,IACA,GADA,IACAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EADA;AADA,SAAA;AAIA,OALA;AAOAZ,MAAAA,CAAA,CAAA,YAAA,CAAA,CAAAsC,EAAA,CAAA,OAAA,EAAA,YAAA;AACAvB,QAAAA,UAAA,CAAAoB,SAAA,CAAA;AACAI,UAAAA,MAAA,EAAA5B,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAAA,GAAA,GAAA,IAAAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA;AADA,SAAA;AAGA,OAJA;AAMAZ,MAAAA,CAAA,CAAA,UAAA,CAAA,CAAAsC,EAAA,CAAA,OAAA,EAAA,YAAA;AACAvB,QAAAA,UAAA,CAAAqB,OAAA,CAAA;AACAG,UAAAA,MAAA,EAAA5B,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,GAAA,GAAA,IAAAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IACA,GADA,IACAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EADA,IACA,GADA,IACAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EADA,IAEA,GAFA,IAEAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,OAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAFA,IAEA,GAFA,IAEAD,QAAA,CAAAJ,MAAA,CAAAK,GAAA,CAAA,QAAA,CAAA,CAAA,GAAA,CAAA,GAAA,EAFA;AADA,SAAA;AAKA,OANA;AAQAZ,MAAAA,CAAA,CAAA,SAAA,CAAA,CAAAsC,EAAA,CAAA,OAAA,EAAA,YAAA;AACAjC,QAAAA,MAAA,CAAAmC,MAAA,CAAAxC,CAAA,CAAA,iBAAAI,aAAA,CAAAqC,QAAA,GAAA,IAAA,EACAC,GADA,CACA3B,UAAA,CAAA4B,SAAA,EADA,EAEAC,OAFA,CAEA,kBAFA;AAGAC,QAAAA,KAAA;AACA,OALA;AAMA,KA5BA;;AA8BA7B,IAAAA,qBAAA;AACAc,IAAAA,eAAA,CAAA1B,aAAA,CAAA0C,aAAA,CAAA;AACAT,IAAAA,gBAAA;AACA,GAlGA;AAmGA,CAzGA,CAAA","file":"Wizard.js","sourcesContent":["define([\n\t'jquery',\n\t'TYPO3/CMS/Imagemap/AreaEditor',\n\t'jquery-ui/sortable',\n\t'jquery-ui/draggable'\n], ($, AreaEditor) => {\n\t$(document).ready(() => {\n\t\tlet configuration = window.imagemap,\n\t\t\t$image = $('#image img'),\n\t\t\teditorConfig = {\n\t\t\t\tcanvas: {\n\t\t\t\t\twidth: parseInt($image.css('width')),\n\t\t\t\t\theight: parseInt($image.css('height')),\n\t\t\t\t\ttop: parseInt($image.css('height')) * -1,\n\t\t\t\t}\n\t\t\t},\n\t\t\tareaEditor = new AreaEditor(\n\t\t\t\t'canvas',\n\t\t\t\t'#areasForm',\n\t\t\t\teditorConfig\n\t\t\t);\n\n\t\tconfiguration.areaEditor = areaEditor;\n\n\t\tlet initializeScaleFactor = () => {\n\t\t\tlet $magnify = $('#magnify'),\n\t\t\t\t$zoomOut = $magnify.find('.zoomout'),\n\t\t\t\t$zoomIn = $magnify.find('.zoomin'),\n\t\t\t\tscaleFactor = areaEditor.initializeScaling($magnify.data('scale-factor'));\n\n\t\t\tareaEditor.setScale(scaleFactor);\n\n\t\t\tif (scaleFactor < 1) {\n\t\t\t\t$zoomIn.removeClass('hide');\n\t\t\t\t$zoomOut.addClass('hide');\n\t\t\t} else {\n\t\t\t\t$zoomIn.addClass('hide');\n\t\t\t\t$zoomOut.addClass('hide');\n\t\t\t}\n\n\t\t\t$zoomIn.click(() => {\n\t\t\t\tareaEditor.setScale(1);\n\t\t\t\t$zoomIn.hide();\n\t\t\t\t$zoomOut.show();\n\t\t\t});\n\n\t\t\t$zoomOut.click(() => {\n\t\t\t\tareaEditor.setScale(scaleFactor);\n\t\t\t\t$zoomOut.hide();\n\t\t\t\t$zoomIn.show();\n\t\t\t});\n\t\t};\n\n\t\tlet initializeAreas = (areas) => {\n\t\t\tareas.forEach((configuration) => {\n\t\t\t\tswitch (configuration.shape) {\n\t\t\t\t\tcase 'rect':\n\t\t\t\t\t\tareaEditor.addRect(configuration);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'circle':\n\t\t\t\t\t\tareaEditor.addCircle(configuration);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'poly':\n\t\t\t\t\t\tareaEditor.addPoly(configuration);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tlet initializeEvents = () => {\n\t\t\t$('#addRect').on('click', function () {\n\t\t\t\tareaEditor.addRect({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 - 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 + 50) + ',' + (parseInt($image.css('height')) / 2 + 50),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#addCircle').on('click', function () {\n\t\t\t\tareaEditor.addCircle({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 - 50) + ',50',\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#addPoly').on('click', function () {\n\t\t\t\tareaEditor.addPoly({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2) + ',' + (parseInt($image.css('height')) / 2 - 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 + 50) + ',' + (parseInt($image.css('height')) / 2 + 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 + 50)\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#submit').on('click', function () {\n\t\t\t\twindow.opener.$('input[name=\"' + configuration.itemName + '\"]')\n\t\t\t\t\t.val(areaEditor.toAreaXml())\n\t\t\t\t\t.trigger('imagemap:changed');\n\t\t\t\tclose();\n\t\t\t});\n\t\t};\n\n\t\tinitializeScaleFactor();\n\t\tinitializeAreas(configuration.existingAreas);\n\t\tinitializeEvents();\n\t});\n});\n"]}