{"version":3,"sources":["Wizard.js"],"names":["define","jQuery","document","ready","configuration","window","defaultAttributeSet","canvasObject","canvasClass","scaleFactor","zoomOut","zoomIn","init","initializeScaling","existingAreas","forEach","addArea","shape","coords","alt","link","color","prepend","attribute","hide","this","show","click","setScale","checkReference","close","areaPolyClass","mousedown","areaCircleClass","dblclick","e","field","selector","itemName","opener","querySelector","$","parent","val","persistanceXML","mouseup","mousemove"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAUC,GAC1GA,EAAMC,UAANC,MAAA,WACC,IAAAC,EAAiBC,OAAGA,SAApBC,EACCA,EAAsBF,oBADvBG,EAECA,IAAYC,YAFbC,EAGCA,EAAcL,YAHfM,EAICA,EAAUT,UAAO,YAJlBU,EAKCA,EAASV,SAAO,YAGjBQ,EAAWG,KAAGL,SAAY,UAACM,aAC3BN,EAAYA,EAAUE,kBAAtBA,GACAL,EAAAA,SAAcG,GAEdH,EAAAA,aAAAG,EAUCH,EAVDU,cAAAC,QAAA,SAAAX,GACCG,EAAaS,QAWd,IAAIP,OAAAA,OAAJL,EAAqBa,MAAA,SACpBP,EAAAQ,OACAd,EAAMe,IACNR,EAAAS,KACAV,EAAAW,MACAjB,EAAAkB,QATClB,EAAcmB,aAcfb,EAAA,GAIAH,EAAAA,OAHAG,EAJDc,OAYAvB,EAAAA,MAAO,WACNM,EAAAA,SAAaS,GACbf,EAAAwB,MAAOD,OACPd,EAHDgB,SAOChB,EAAAiB,MAAO,WACPpB,EAHDqB,SAAAnB,GAKAR,EAAMwB,MAACD,OACNjB,EAAAA,SAIDN,EAAAA,YAAA0B,MAAA,WAbC,OAcApB,EAASS,QAAGa,IAAAA,cAAZ,GAAA,GAAA,GAAA,GAAA,EAAAvB,IAdO,IAiBNL,EAAA,YAAA0B,MAAA,WACDG,OAdAvB,EAAaS,QAAQ,IAAIe,cAAiB,GAAI,GAAI,GAAI,GAAI,EAAGzB,IAc7DwB,IAKC7B,EAAA,YAAOM,MAAayB,WAGrB,OAFCzB,EACQS,QAAA,IAAaiB,gBAAA,GAAA,GAAA,GAAA,GAAA,EAAA3B,IACtB,IAIAL,EACCiC,WAASP,MAAUQ,WACpB,IAAAC,EAGD,WACC,IAAIC,EAAW,eAAiBjC,EAAckC,SAAW,KACzD,CAAA,GAAIjC,OAAOkC,QAAUlC,OAAOkC,OAAOrC,UAAYG,OAAOkC,OAAOrC,SAASsC,cAAcH,GACnF,OAAOhC,OAAOkC,OAAOrC,SAASsC,cAAcH,GAE5CP,SARMvB,GAXR6B,GALEK,EAAEL,EAAOM,OAAOH,OAAOrC,UAAUyC,IAAI,QAAUpC,EAAaqC,iBAAmB,UAoBhFd,UAEC7B,EAAA,WACA+B,UAAM,SAAAG,GACNL,OAAAA,EAAKE,UAAAG,KAENU,QAAA,SAAAV,GAhBA,OAAO5B,EAAasC,QAAQV,KAxE9BW,UAAA,SAAAX,GADD,OAAA5B,EAAAuC,UAAAX,KA8EID,SAAS,SAAUC,GACpB,OAAO5B,EAAa2B,SAASC","file":"Wizard.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], function (jQuery) {\n\tjQuery(document).ready(function () {\n\t\tlet configuration = window.imagemap,\n\t\t\tdefaultAttributeSet = configuration.defaultAttributeset,\n\t\t\tcanvasObject = new canvasClass(),\n\t\t\tscaleFactor = configuration.scaleFactor,\n\t\t\tzoomOut = jQuery('> .zout', '#magnify'),\n\t\t\tzoomIn = jQuery('> .zin', '#magnify');\n\n\t\tcanvasObject.init('canvas', 'picture', 'areaForms');\n\t\tscaleFactor = canvasObject.initializeScaling(scaleFactor);\n\t\tcanvasObject.setScale(scaleFactor);\n\t\tconfiguration.canvasObject = canvasObject;\n\n\t\tconfiguration.existingAreas.forEach(function (configuration) {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\tconfiguration.prepend,\n\t\t\t\tconfiguration.attribute\n\t\t\t);\n\t\t});\n\n\t\tif (scaleFactor < 1) {\n\t\t\tzoomOut.hide();\n\t\t} else {\n\t\t\tzoomIn.hide();\n\t\t\tzoomOut.hide();\n\t\t}\n\n\t\tzoomIn.click(function () {\n\t\t\tcanvasObject.setScale(1);\n\t\t\tjQuery(this).hide();\n\t\t\tzoomOut.show();\n\t\t});\n\n\t\tzoomOut.click(function () {\n\t\t\tcanvasObject.setScale(scaleFactor);\n\t\t\tjQuery(this).hide();\n\t\t\tzoomIn.show();\n\t\t});\n\n\t\tjQuery('#addRect').click(function () {\n\t\t\tcanvasObject.addArea(new areaRectClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t\treturn false;\n\t\t});\n\n\t\tjQuery('#addPoly').click(function () {\n\t\t\tcanvasObject.addArea(new areaPolyClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t\treturn false;\n\t\t});\n\n\t\tjQuery('#addCirc').click(function () {\n\t\t\tcanvasObject.addArea(new areaCircleClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t\treturn false;\n\t\t});\n\n\t\tjQuery('#submit').click(function () {\n\t\t\tlet field = checkReference();\n\t\t\tif (field) {\n\t\t\t\t$(field, parent.opener.document).val('<map>' + canvasObject.persistanceXML() + '</map>');\n\t\t\t}\n\t\t\tclose();\n\t\t});\n\n\t\tjQuery('#canvas')\n\t\t\t.mousedown(function (e) {\n\t\t\t\treturn canvasObject.mousedown(e);\n\t\t\t})\n\t\t\t.mouseup(function (e) {\n\t\t\treturn canvasObject.mouseup(e);\n\t\t})\n\t\t\t.mousemove(function (e) {\n\t\t\treturn canvasObject.mousemove(e);\n\t\t})\n\t\t\t.dblclick(function (e) {\n\t\t\treturn canvasObject.dblclick(e);\n\t\t});\n\n\t\tfunction checkReference() {\n\t\t\tlet selector = 'input[name=\"' + configuration.itemName + '\"]';\n\t\t\tif (window.opener && window.opener.document && window.opener.document.querySelector(selector)) {\n\t\t\t\treturn window.opener.document.querySelector(selector);\n\t\t\t} else {\n\t\t\t\tclose();\n\t\t\t}\n\t\t};\n\t});\n});\n"]}