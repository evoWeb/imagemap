{"version":3,"sources":["Wizard.js"],"names":["define","$","document","ready","configuration","window","defaultAttributeSet","canvasObject","canvasClass","scaleFactor","$zoomOut","$zoomIn","init","initializeScaling","existingAreas","forEach","addArea","shape","hide","alt","link","prepend","attribute","click","this","show","close","on","areaRectClass","areaPolyClass","areaCircleClass","opener","itemName","val","persistanceXML","trigger","mousedown","bind","mouseup","mousemove","dblclick"],"mappings":"AAAAA,OAAO,CAAC,SAAU,qBAAsB,sBAAuB,iCAAkC,SAAUC,GAC1GA,EAACC,UAADC,MAAA,WACC,IAAAC,EAAiBC,OAAGA,SAApBC,EACCA,EAAsBF,oBADvBG,EAECA,IAAYC,YAFbC,EAGCA,EAAcL,YAHfM,EAICA,EAAQ,UAAK,YAJdC,EAKCA,EAAO,SAAK,YAGbF,EAAWG,KAAGL,SAAY,UAACM,aAC3BN,EAAYA,EAAUE,kBAAtBA,GACAL,EAAAA,SAAcG,GAEdH,EAAAA,aAAAG,EAUCH,EAVDU,cAAAC,QAAA,SAAAX,GACCG,EAAaS,QAWd,IAAIP,OAAAA,OAAJL,EAAqBa,MAAA,SACpBP,EAASQ,OACTd,EAAMe,IACNR,EAAAS,KACAV,EAASQ,MACTd,EAAAiB,QATCjB,EAAckB,aAcfZ,EAAA,GAIAH,EAAAA,OAHAG,EAJDQ,OAYAjB,EAAEsB,MAAD,WACAhB,EAAAA,SAAaS,GACbf,EAFDuB,MAAAN,OAIAjB,EAAEwB,SAIFxB,EAAEsB,MAAA,WACDhB,EAAAA,SAAaS,GACbf,EAFDuB,MAAAN,OAIAjB,EAAEwB,SAKDC,EAAAA,YAAKC,GAAA,QAAA,WACLpB,EANDS,QAAA,IAAAY,cAAA,GAAA,GAAA,GAAA,GAAA,EAAAtB,KAzDFL,EAAA,YAAA0B,GAAA,QAAA,WAkDGpB,EAAaS,QAAQ,IAAIa,cAAiB,GAAI,GAAI,GAAI,GAAI,EAAGvB,KAG9DL,EAAE,cAAc0B,GAAG,QAAS,WAC3BpB,EAAaS,QAAQ,IAAIc,gBAAmB,GAAI,GAAI,GAAI,GAAI,EAAGxB,KAGhEL,EAAE,WAAW0B,GAAG,QAAS,WACXtB,OAAO0B,OAAO9B,EAAE,eAAiBG,EAAc4B,SAAW,MAErEC,IAAI,QAAU1B,EAAa2B,iBAAmB,UAC9CC,QAAQ,oBACVT,UAGDzB,EAAE,WACA0B,GAAG,YAAapB,EAAa6B,UAAUC,KAAK9B,IAC5CoB,GAAG,UAAWpB,EAAa+B,QAAQD,KAAK9B,IACxCoB,GAAG,YAAapB,EAAagC,UAAUF,KAAK9B,IAC5CoB,GAAG,WAAYpB,EAAaiC,SAASH,KAAK9B","file":"Wizard.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], function ($) {\n\t$(document).ready(function () {\n\t\tlet configuration = window.imagemap,\n\t\t\tdefaultAttributeSet = configuration.defaultAttributeset,\n\t\t\tcanvasObject = new canvasClass(),\n\t\t\tscaleFactor = configuration.scaleFactor,\n\t\t\t$zoomOut = $('> .zout', '#magnify'),\n\t\t\t$zoomIn = $('> .zin', '#magnify');\n\n\t\tcanvasObject.init('canvas', 'picture', 'areaForms');\n\t\tscaleFactor = canvasObject.initializeScaling(scaleFactor);\n\t\tcanvasObject.setScale(scaleFactor);\n\t\tconfiguration.canvasObject = canvasObject;\n\n\t\tconfiguration.existingAreas.forEach(function (configuration) {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\tconfiguration.prepend,\n\t\t\t\tconfiguration.attribute\n\t\t\t);\n\t\t});\n\n\t\tif (scaleFactor < 1) {\n\t\t\t$zoomOut.hide();\n\t\t} else {\n\t\t\t$zoomIn.hide();\n\t\t\t$zoomOut.hide();\n\t\t}\n\n\t\t$zoomIn.click(function () {\n\t\t\tcanvasObject.setScale(1);\n\t\t\t$(this).hide();\n\t\t\t$zoomOut.show();\n\t\t});\n\n\t\t$zoomOut.click(function () {\n\t\t\tcanvasObject.setScale(scaleFactor);\n\t\t\t$(this).hide();\n\t\t\t$zoomIn.show();\n\t\t});\n\n\t\t$('#addRect').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaRectClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t});\n\n\t\t$('#addPoly').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaPolyClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t});\n\n\t\t$('#addCircle').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaCircleClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t});\n\n\t\t$('#submit').on('click', function () {\n\t\t\tlet $field = window.opener.$('input[name=\"' + configuration.itemName + '\"]');\n\t\t\t$field\n\t\t\t\t.val('<map>' + canvasObject.persistanceXML() + '</map>')\n\t\t\t\t.trigger('imagemap:changed');\n\t\t\tclose();\n\t\t});\n\n\t\t$('#canvas')\n\t\t\t.on('mousedown', canvasObject.mousedown.bind(canvasObject))\n\t\t\t.on('mouseup', canvasObject.mouseup.bind(canvasObject))\n\t\t\t.on('mousemove', canvasObject.mousemove.bind(canvasObject))\n\t\t\t.on('dblclick', canvasObject.dblclick.bind(canvasObject));\n\t});\n});\n"]}