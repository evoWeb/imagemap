{"version":3,"sources":["Wizard.es6"],"names":["define","$","AreaEditor","document","ready","configuration","window","imagemap","$image","$canvas","editorOptions","canvas","width","parseInt","css","height","top","areaEditor","initializeScaleFactor","scaleFactor","$magnify","$zoomOut","find","$zoomIn","setScale","removeClass","click","hide","show","initializeEvents","on","addRect","coords","addCircle","addPoly","opener","itemName","val","toAreaXml","trigger","close","data","initializeAreas","existingAreas"],"mappings":"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","file":"Wizard.js","sourcesContent":["define([\n\t'jquery',\n\t'TYPO3/CMS/Imagemap/AreaEditor'\n], ($, AreaEditor) => {\n\t$(document).ready(() => {\n\t\tlet configuration = window.imagemap,\n\t\t\t$image = $('.image img'),\n\t\t\t$canvas = $('.picture'),\n\t\t\teditorOptions = {\n\t\t\t\tcanvas: {\n\t\t\t\t\twidth: parseInt($image.css('width')),\n\t\t\t\t\theight: parseInt($image.css('height')),\n\t\t\t\t\ttop: parseInt($image.css('height')) * -1,\n\t\t\t\t}\n\t\t\t},\n\t\t\tareaEditor = new AreaEditor(editorOptions, 'canvas', '#areasForm');\n\n\t\tconfiguration.areaEditor = areaEditor;\n\n\t\tlet initializeScaleFactor = (scaleFactor) => {\n\t\t\tlet $magnify = $('#magnify'),\n\t\t\t\t$zoomOut = $magnify.find('.zoomout'),\n\t\t\t\t$zoomIn = $magnify.find('.zoomin');\n\n\t\t\tareaEditor.setScale();\n\n\t\t\tif (scaleFactor < 1) {\n\t\t\t\t$zoomIn.removeClass('hide');\n\n\t\t\t\t$zoomIn.click(() => {\n\t\t\t\t\tareaEditor.setScale(1);\n\t\t\t\t\t$zoomIn.hide();\n\t\t\t\t\t$zoomOut.show();\n\t\t\t\t});\n\n\t\t\t\t$zoomOut.click(() => {\n\t\t\t\t\tareaEditor.setScale(scaleFactor);\n\t\t\t\t\t$zoomOut.hide();\n\t\t\t\t\t$zoomIn.show();\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tlet initializeEvents = () => {\n\t\t\t$('#addRect').on('click', () => {\n\t\t\t\tareaEditor.addRect({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 - 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 + 50) + ',' + (parseInt($image.css('height')) / 2 + 50),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#addCircle').on('click', () => {\n\t\t\t\tareaEditor.addCircle({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 - 50) + ',50',\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#addPoly').on('click', () => {\n\t\t\t\tareaEditor.addPoly({\n\t\t\t\t\tcoords: (parseInt($image.css('width')) / 2) + ',' + (parseInt($image.css('height')) / 2 - 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 + 50) + ',' + (parseInt($image.css('height')) / 2 + 50)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2) + ',' + (parseInt($image.css('height')) / 2 + 70)\n\t\t\t\t\t\t+ ',' + (parseInt($image.css('width')) / 2 - 50) + ',' + (parseInt($image.css('height')) / 2 + 50)\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#submit').on('click', () => {\n\t\t\t\twindow.opener.$('input[name=\"' + configuration.itemName + '\"]')\n\t\t\t\t\t.val(areaEditor.toAreaXml())\n\t\t\t\t\t.trigger('imagemap:changed');\n\t\t\t\tclose();\n\t\t\t});\n\t\t};\n\n\t\tinitializeScaleFactor($canvas.data('scale-factor'));\n\t\tinitializeEvents();\n\t\tareaEditor.initializeAreas(configuration.existingAreas);\n\t});\n});\n"]}