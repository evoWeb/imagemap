{"version":3,"sources":["Wizard.js"],"names":["define","$","configuration","window","imagemap","defaultAttributeSet","defaultAttributeset","canvasObject","canvasClass","scaleFactor","$zoomOut","$zoomIn","existingAreas","forEach","addArea","shape","alt","prepend","attribute","hide","this","close","areaRectClass","on","areaPolyClass","areaCircleClass","opener","itemName","val","persistanceXML","trigger","mousedown","bind","mouseup","mousemove","dblclick"],"mappings":"AAAAA,OAAAA,CAAAA,SAAAA,qBAAAA,sBAAAA,iCAAAA,SAAAA,GACAC,EAAAA,UAAAA,MAAAA,WACA,IAAAC,EAAAC,OAAAC,SAAAC,EAAAH,EAAAI,oBAAAC,EAAA,IAAAC,YAAAC,EAAAP,EAAAO,YAAAC,EAAAT,EAAA,UAAA,YAAAU,EAAAV,EAAA,SAAA,YAQAQ,EAAAA,KAAAA,SAAAA,UAAAA,aACAF,EAAAA,EAAAA,kBAAAA,GACAL,EAAAA,SAAAA,GAEAA,EAAAA,aAAAA,EAUAA,EAAAU,cAAAC,QAAA,SAAAX,GATAK,EAAAO,QAWA,IAAAX,OAAA,OAAAD,EAAAa,MAAA,SACAL,EAAAA,OACAR,EAAAc,IACAL,EAAAA,KACAD,EAAAA,MACAR,EAAAe,QATAf,EAAAgB,aAcAR,EAAAA,GAIAH,EAAAA,OAHAG,EAAAS,OAQAlB,EAAAA,MAAAA,WACAM,EAAAA,SAAAA,GACAN,EAAAmB,MAAAD,OAEAlB,EAAAA,SAIAA,EAAAA,MAAAA,WACAM,EAAAA,SAAAA,GACAN,EAAAmB,MAAAD,OAEAlB,EAAAA,SAKAoB,EAAAA,YAAAA,GAAAA,QAAAA,WACAd,EAAAO,QAAA,IAAAQ,cAAA,GAAA,GAAA,GAAA,GAAA,EAAAjB,KAQAJ,EAAA,YAAAsB,GAAA,QAAA,WArBAhB,EAAAO,QAAA,IAAAU,cAAA,GAAA,GAAA,GAAA,GAAA,EAAAnB,KAGAJ,EAAA,cAAAsB,GAAA,QAAA,WACAhB,EAAAO,QAAA,IAAAW,gBAAA,GAAA,GAAA,GAAA,GAAA,EAAApB,KAGAJ,EAAA,WAAAsB,GAAA,QAAA,WACApB,OAAAuB,OAAAzB,EAAA,eAAAC,EAAAyB,SAAA,MAEAC,IAAA,QAAArB,EAAAsB,iBAAA,UACAC,QAAA,oBACAT,UAGApB,EAAA,WACAsB,GAAA,YAAAhB,EAAAwB,UAAAC,KAAAzB,IACAgB,GAAA,UAAAhB,EAAA0B,QAAAD,KAAAzB,IACAgB,GAAA,YAAAhB,EAAA2B,UAAAF,KAAAzB,IACAgB,GAAA,WAAAhB,EAAA4B,SAAAH,KAAAzB","file":"Wizard.js","sourcesContent":["define(['jquery', 'jquery-ui/sortable', 'jquery-ui/draggable', 'TYPO3/CMS/Imagemap/JsGraphics'], function ($) {\n\t$(document).ready(function () {\n\t\tlet configuration = window.imagemap,\n\t\t\tdefaultAttributeSet = configuration.defaultAttributeset,\n\t\t\tcanvasObject = new canvasClass(),\n\t\t\tscaleFactor = configuration.scaleFactor,\n\t\t\t$zoomOut = $('> .zout', '#magnify'),\n\t\t\t$zoomIn = $('> .zin', '#magnify');\n\n\t\tcanvasObject.init('canvas', 'picture', 'areaForms');\n\t\tscaleFactor = canvasObject.initializeScaling(scaleFactor);\n\t\tcanvasObject.setScale(scaleFactor);\n\t\tconfiguration.canvasObject = canvasObject;\n\n\t\tconfiguration.existingAreas.forEach(function (configuration) {\n\t\t\tcanvasObject.addArea(\n\t\t\t\tnew window['area' + configuration.shape + 'Class'](),\n\t\t\t\tconfiguration.coords,\n\t\t\t\tconfiguration.alt,\n\t\t\t\tconfiguration.link,\n\t\t\t\tconfiguration.color,\n\t\t\t\tconfiguration.prepend,\n\t\t\t\tconfiguration.attribute\n\t\t\t);\n\t\t});\n\n\t\tif (scaleFactor < 1) {\n\t\t\t$zoomOut.hide();\n\t\t} else {\n\t\t\t$zoomIn.hide();\n\t\t\t$zoomOut.hide();\n\t\t}\n\n\t\t$zoomIn.click(function () {\n\t\t\tcanvasObject.setScale(1);\n\t\t\t$(this).hide();\n\t\t\t$zoomOut.show();\n\t\t});\n\n\t\t$zoomOut.click(function () {\n\t\t\tcanvasObject.setScale(scaleFactor);\n\t\t\t$(this).hide();\n\t\t\t$zoomIn.show();\n\t\t});\n\n\t\t$('#addRect').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaRectClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t});\n\n\t\t$('#addPoly').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaPolyClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t});\n\n\t\t$('#addCircle').on('click', function () {\n\t\t\tcanvasObject.addArea(new areaCircleClass(), '', '', '', '', 1, defaultAttributeSet);\n\t\t});\n\n\t\t$('#submit').on('click', function () {\n\t\t\tlet $field = window.opener.$('input[name=\"' + configuration.itemName + '\"]');\n\t\t\t$field\n\t\t\t\t.val('<map>' + canvasObject.persistanceXML() + '</map>')\n\t\t\t\t.trigger('imagemap:changed');\n\t\t\tclose();\n\t\t});\n\n\t\t$('#canvas')\n\t\t\t.on('mousedown', canvasObject.mousedown.bind(canvasObject))\n\t\t\t.on('mouseup', canvasObject.mouseup.bind(canvasObject))\n\t\t\t.on('mousemove', canvasObject.mousemove.bind(canvasObject))\n\t\t\t.on('dblclick', canvasObject.dblclick.bind(canvasObject));\n\t});\n});\n"]}