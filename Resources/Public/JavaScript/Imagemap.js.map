{"version":3,"sources":["Imagemap.es6"],"names":["define","fabric","imagemap","Rect","options","form","subForm","setValues","addEvents","querySelector","value","link","alt","style","backgroundColor","color","querySelectorAll","forEach","button","addEventListener","id","bind","showElement","hideElement","selector","classList","add","remove","coords","left","top","width","height","getAdditionalAttributeXML","getLink","Circle","radius","Polygon","joinCoords","AreaForm","formElement","element","document","DOMParser","parseFromString","innerHTML","body","firstChild","area","getFormElement","insertBefore","postInitializeForm","coordForm","blur","data","window","browseLink","objectId","getId","currentValue","$","ajax","url","TYPO3","settings","ajaxUrls","context","done","response","console","log","vHWin","open","focus","AreaEditor","canvas","scaling","parseInt","scaleFactor","configuration","split","right","bottom","borderColor","stroke","strokeWidth","fill","hexToRgbA","addRect","addCircle","coordsXY","i","points","length","Error","xy","x","y","push","Math","min","addPoly","hex","alpha","chars","r","g","b","result","test","substring","join","event","Canvas"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,MAAA,CAAA,CAAA,2BAAA,CAAA,EAAA,UAAAC,MAAA,EAAA;AACA,MAAAC,QAAA,GAAAA,QAAA,IAAA,EAAA;;AADA,MAGAC,IAHA;AAAA;AAAA;AAAA;;AAIA,kBAAAC,OAAA,EAAA;AAAA;;AAAA;;AACA,gFAAAA,OAAA;AAEA,YAAAC,IAAA,GAAA,IAAA;AACA,YAAAC,OAAA,GAAA,IAAA;AAJA;AAKA;;AATA;AAAA;AAAA,2CAWA;AACA,aAAAC,SAAA;AACA,aAAAC,SAAA;AACA;AAdA;AAAA;AAAA,kCAgBA;AACA,aAAAF,OAAA,CAAAG,aAAA,CAAA,OAAA,EAAAC,KAAA,GAAA,KAAAC,IAAA;AACA,aAAAL,OAAA,CAAAG,aAAA,CAAA,QAAA,EAAAC,KAAA,GAAA,KAAAE,GAAA;AACA,aAAAN,OAAA,CAAAG,aAAA,CAAA,qBAAA,EAAAI,KAAA,CAAAC,eAAA,GAAA,KAAAC,KAAA;AACA;AApBA;AAAA;AAAA,kCAsBA;AACA,aAAAT,OAAA,CAAAU,gBAAA,CAAA,WAAA,EAAAC,OAAA,CAAA,UAAAC,MAAA,EAAA;AACAA,UAAAA,MAAA,CAAAC,gBAAA,CAAA,OAAA,EAAA,KAAAD,MAAA,CAAAE,EAAA,GAAA,QAAA,EAAAC,IAAA,CAAA,IAAA,CAAA;AACA,SAFA,CAEAA,IAFA,CAEA,IAFA,CAAA;AAGA;AA1BA;AAAA;AAAA,mCA4BA,CACA;AACA;AA9BA;AAAA;AAAA,iCAgCA,CACA;AAjCA;AAAA;AAAA,mCAmCA,CACA;AApCA;AAAA;AAAA,mCAsCA,CACA;AAvCA;AAAA;AAAA,mCAyCA,CACA;AA1CA;AAAA;AAAA,qCA4CA,CACA;AA7CA;AAAA;AAAA,qCA+CA;AACA,aAAAC,WAAA,CAAA,cAAA;AACA,aAAAC,WAAA,CAAA,SAAA;AACA,aAAAD,WAAA,CAAA,UAAA;AACA;AAnDA;AAAA;AAAA,sCAqDA;AACA,aAAAC,WAAA,CAAA,cAAA;AACA,aAAAA,WAAA,CAAA,UAAA;AACA,aAAAD,WAAA,CAAA,SAAA;AACA;AAzDA;AAAA;AAAA,kCA2DAE,QA3DA,EA2DA;AACA,aAAAlB,OAAA,CAAAG,aAAA,CAAAe,QAAA,EAAAC,SAAA,CAAAC,GAAA,CAAA,MAAA;AACA;AA7DA;AAAA;AAAA,kCA+DAF,QA/DA,EA+DA;AACA,aAAAlB,OAAA,CAAAG,aAAA,CAAAe,QAAA,EAAAC,SAAA,CAAAE,MAAA,CAAA,MAAA;AACA;AAjEA;AAAA;AAAA,uCAmEA;AACA,YAAAC,MAAA,GAAA,KAAAC,IAAA,GAAA,GAAA,GAAA,KAAAC,GAAA,GAAA,GAAA,IAAA,KAAAD,IAAA,GAAA,KAAAE,KAAA,IAAA,GAAA,IAAA,KAAAC,MAAA,GAAA,KAAAF,GAAA,CAAA;AACA,eAAA,gCAAAF,MAAA,GAAA,IAAA,GAAA,KAAAK,yBAAA,EAAA,GAAA,GAAA,GACA,KAAAC,OAAA,EADA,GACA,SADA;AAEA;AAvEA;;AAAA;AAAA,IAGAjC,MAAA,CAAAE,IAHA;;AAAA,MA0EAgC,MA1EA;AAAA;AAAA;AAAA;;AA2EA,oBAAA/B,OAAA,EAAA;AAAA;;AAAA;;AACA,mFAAAA,OAAA;AAEA,aAAAC,IAAA,GAAA,IAAA;AACA,aAAAC,OAAA,GAAA,IAAA;AAJA;AAKA;;AAhFA;AAAA;AAAA,2CAkFA;AACA,aAAAC,SAAA;AACA,aAAAC,SAAA;AACA;AArFA;AAAA;AAAA,kCAuFA;AACA,aAAAF,OAAA,CAAAG,aAAA,CAAA,OAAA,EAAAC,KAAA,GAAA,KAAAC,IAAA;AACA,aAAAL,OAAA,CAAAG,aAAA,CAAA,QAAA,EAAAC,KAAA,GAAA,KAAAE,GAAA;AACA,aAAAN,OAAA,CAAAG,aAAA,CAAA,qBAAA,EAAAI,KAAA,CAAAC,eAAA,GAAA,KAAAC,KAAA;AACA;AA3FA;AAAA;AAAA,kCA6FA;AACA,aAAAT,OAAA,CAAAU,gBAAA,CAAA,WAAA,EAAAC,OAAA,CAAA,UAAAC,MAAA,EAAA;AACAA,UAAAA,MAAA,CAAAC,gBAAA,CAAA,OAAA,EAAA,KAAAD,MAAA,CAAAE,EAAA,GAAA,QAAA,EAAAC,IAAA,CAAA,IAAA,CAAA;AACA,SAFA,CAEAA,IAFA,CAEA,IAFA,CAAA;AAGA;AAjGA;AAAA;AAAA,mCAmGA,CACA;AACA;AArGA;AAAA;AAAA,iCAuGA,CACA;AAxGA;AAAA;AAAA,mCA0GA,CACA;AA3GA;AAAA;AAAA,mCA6GA,CACA;AA9GA;AAAA;AAAA,mCAgHA,CACA;AAjHA;AAAA;AAAA,qCAmHA,CACA;AApHA;AAAA;AAAA,qCAsHA;AACA,aAAAC,WAAA,CAAA,cAAA;AACA,aAAAC,WAAA,CAAA,SAAA;AACA,aAAAD,WAAA,CAAA,UAAA;AACA;AA1HA;AAAA;AAAA,sCA4HA;AACA,aAAAC,WAAA,CAAA,cAAA;AACA,aAAAA,WAAA,CAAA,UAAA;AACA,aAAAD,WAAA,CAAA,SAAA;AACA;AAhIA;AAAA;AAAA,kCAkIAE,QAlIA,EAkIA;AACA,aAAAlB,OAAA,CAAAG,aAAA,CAAAe,QAAA,EAAAC,SAAA,CAAAC,GAAA,CAAA,MAAA;AACA;AApIA;AAAA;AAAA,kCAsIAF,QAtIA,EAsIA;AACA,aAAAlB,OAAA,CAAAG,aAAA,CAAAe,QAAA,EAAAC,SAAA,CAAAE,MAAA,CAAA,MAAA;AACA;AAxIA;AAAA;AAAA,uCA0IA;AACA,YAAAC,MAAA,GAAA,KAAAC,IAAA,GAAA,GAAA,GAAA,KAAAC,GAAA,GAAA,GAAA,GAAA,KAAAM,MAAA;AACA,eAAA,kCAAAR,MAAA,GAAA,IAAA,GAAA,KAAAK,yBAAA,EAAA,GAAA,GAAA,GACA,KAAAC,OAAA,EADA,GACA,SADA;AAEA;AA9IA;;AAAA;AAAA,IA0EAjC,MAAA,CAAAkC,MA1EA;;AAAA,MAiJAE,OAjJA;AAAA;AAAA;AAAA;;AAkJA,qBAAAjC,OAAA,EAAA;AAAA;;AAAA;;AACA,oFAAAA,OAAA;AAEA,aAAAC,IAAA,GAAA,IAAA;AACA,aAAAC,OAAA,GAAA,IAAA;AAJA;AAKA;;AAvJA;AAAA;AAAA,2CAyJA;AACA,aAAAC,SAAA;AACA,aAAAC,SAAA;AACA;AA5JA;AAAA;AAAA,kCA8JA;AACA,aAAAF,OAAA,CAAAG,aAAA,CAAA,OAAA,EAAAC,KAAA,GAAA,KAAAC,IAAA;AACA,aAAAL,OAAA,CAAAG,aAAA,CAAA,QAAA,EAAAC,KAAA,GAAA,KAAAE,GAAA;AACA,aAAAN,OAAA,CAAAG,aAAA,CAAA,qBAAA,EAAAI,KAAA,CAAAC,eAAA,GAAA,KAAAC,KAAA;AACA;AAlKA;AAAA;AAAA,kCAoKA;AACA,aAAAT,OAAA,CAAAU,gBAAA,CAAA,WAAA,EAAAC,OAAA,CAAA,UAAAC,MAAA,EAAA;AACAA,UAAAA,MAAA,CAAAC,gBAAA,CAAA,OAAA,EAAA,KAAAD,MAAA,CAAAE,EAAA,GAAA,QAAA,EAAAC,IAAA,CAAA,IAAA,CAAA;AACA,SAFA,CAEAA,IAFA,CAEA,IAFA,CAAA;AAGA;AAxKA;AAAA;AAAA,mCA0KA,CACA;AACA;AA5KA;AAAA;AAAA,iCA8KA,CACA;AA/KA;AAAA;AAAA,mCAiLA,CACA;AAlLA;AAAA;AAAA,mCAoLA,CACA;AArLA;AAAA;AAAA,mCAuLA,CACA;AAxLA;AAAA;AAAA,qCA0LA,CACA;AA3LA;AAAA;AAAA,kCA6LA,CACA;AA9LA;AAAA;AAAA,qCAgMA;AACA,aAAAC,WAAA,CAAA,cAAA;AACA,aAAAC,WAAA,CAAA,SAAA;AACA,aAAAD,WAAA,CAAA,UAAA;AACA;AApMA;AAAA;AAAA,sCAsMA;AACA,aAAAC,WAAA,CAAA,cAAA;AACA,aAAAA,WAAA,CAAA,UAAA;AACA,aAAAD,WAAA,CAAA,SAAA;AACA;AA1MA;AAAA;AAAA,kCA4MAE,QA5MA,EA4MA;AACA,aAAAlB,OAAA,CAAAG,aAAA,CAAAe,QAAA,EAAAC,SAAA,CAAAC,GAAA,CAAA,MAAA;AACA;AA9MA;AAAA;AAAA,kCAgNAF,QAhNA,EAgNA;AACA,aAAAlB,OAAA,CAAAG,aAAA,CAAAe,QAAA,EAAAC,SAAA,CAAAE,MAAA,CAAA,MAAA;AACA;AAlNA;AAAA;AAAA,uCAoNA;AACA,eAAA,gCAAA,KAAAW,UAAA,EAAA,GACA,IADA,GACA,KAAAL,yBAAA,EADA,GACA,GADA,GACA,KAAAC,OAAA,EADA,GACA,SADA;AAEA;AAvNA;;AAAA;AAAA,IAiJAjC,MAAA,CAAAoC,OAjJA;;AAAA,MA0NAE,QA1NA;AAAA;AAAA;AA2NA,sBAAAC,WAAA,EAAA;AAAA;;AACA,WAAAC,OAAA,GAAAxC,MAAA,CAAAyC,QAAA,CAAAjC,aAAA,CAAA,MAAA+B,WAAA,CAAA;AACA;;AA7NA;AAAA;AAAA,qCA+NAhB,QA/NA,EA+NA;AACA,eAAA,IAAAmB,SAAA,GAAAC,eAAA,CACA,KAAAH,OAAA,CAAAhC,aAAA,CAAAe,QAAA,EAAAqB,SADA,EAEA,WAFA,EAGAC,IAHA,CAGAC,UAHA;AAIA;AApOA;AAAA;AAAA,8BAsOAC,IAtOA,EAsOA;AACAA,QAAAA,IAAA,CAAA3C,IAAA,GAAA,IAAA;AACA2C,QAAAA,IAAA,CAAA1C,OAAA,GAAA,KAAA2C,cAAA,CAAA,WAAA,CAAA;AAEA,aAAAR,OAAA,CAAAS,YAAA,CAAAF,IAAA,CAAA1C,OAAA,EAAA,KAAAmC,OAAA,CAAAM,UAAA;AACAC,QAAAA,IAAA,CAAAG,kBAAA;AACA;AA5OA;AAAA;AAAA,gCA8OAH,IA9OA,EA8OA;AACAA,QAAAA,IAAA,CAAA3C,IAAA,GAAA,IAAA;AACA2C,QAAAA,IAAA,CAAA1C,OAAA,GAAA,KAAA2C,cAAA,CAAA,WAAA,CAAA;AAEA,aAAAR,OAAA,CAAAS,YAAA,CAAAF,IAAA,CAAA1C,OAAA,EAAA,KAAAmC,OAAA,CAAAM,UAAA;AACAC,QAAAA,IAAA,CAAAG,kBAAA;AACA;AApPA;AAAA;AAAA,8BAsPAH,IAtPA,EAsPA;AACAA,QAAAA,IAAA,CAAA3C,IAAA,GAAA,IAAA;AACA2C,QAAAA,IAAA,CAAA1C,OAAA,GAAA,KAAA2C,cAAA,CAAA,WAAA,CAAA;AACAD,QAAAA,IAAA,CAAAI,SAAA,GAAA,KAAAH,cAAA,CAAA,aAAA,CAAA;AAEA,aAAAR,OAAA,CAAAS,YAAA,CAAAF,IAAA,CAAA1C,OAAA,EAAA,KAAAmC,OAAA,CAAAM,UAAA;AACAC,QAAAA,IAAA,CAAAG,kBAAA;AACA;AA7PA;AAAA;AAAA,gCA+PAxC,IA/PA,EA+PAqC,IA/PA,EA+PA;AACArC,QAAAA,IAAA,CAAA0C,IAAA;AAEA,YAAAC,IAAA,GAAAC,MAAA,CAAArD,QAAA,CAAAsD,UAAA;AACAF,QAAAA,IAAA,CAAAG,QAAA,GAAAT,IAAA,CAAAU,KAAA,EAAA;AACAJ,QAAAA,IAAA,CAAAK,YAAA,GAAAX,IAAA,CAAAd,OAAA,EAAA;AAEA0B,QAAAA,CAAA,CAAAC,IAAA,CAAA;AACAC,UAAAA,GAAA,EAAAC,KAAA,CAAAC,QAAA,CAAAC,QAAA,CAAA,yBAAA,CADA;AAEAC,UAAAA,OAAA,EAAAlB,IAFA;AAGAM,UAAAA,IAAA,EAAAA;AAHA,SAAA,EAIAa,IAJA,CAIA,UAAAC,QAAA,EAAA;AACAC,UAAAA,OAAA,CAAAC,GAAA,CAAAF,QAAA;AACA,cAAAG,KAAA,GAAAhB,MAAA,CAAAiB,IAAA,CAAAJ,QAAA,CAAAN,GAAA,EAAA,EAAA,EAAA,sDAAA,CAAA;AAAAS,UAAAA,KAAA,CAAAE,KAAA;AACA,SAPA;AAQA;AA9QA;;AAAA;AAAA;;AAAA,MAiRAC,UAjRA;AAAA;AAAA;AAAA;;AAkRA,wBAAAC,MAAA,EAAAtE,IAAA,EAAAD,OAAA,EAAA;AAAA;;AAAA;;AACA,uFAAAuE,MAAA,EAAAvE,OAAA;AAEA,aAAAC,IAAA,GAAA,IAAAkC,QAAA,CAAAlC,IAAA,CAAA;AAHA;AAIA;;AAtRA;AAAA;AAAA,wCAwRAuE,OAxRA,EAwRA;AACA,YAAA7C,KAAA,GAAA8C,QAAA,CAAAD,OAAA,CAAA,GAAA,KAAA7C,KAAA;AAAA,YACAC,MAAA,GAAA6C,QAAA,CAAAD,OAAA,CAAA,GAAA,KAAA5C,MADA;AAEA,eAAAD,KAAA,GAAAC,MAAA,GAAAA,MAAA,GAAAD,KAAA;AACA;AA5RA;AAAA;AAAA,+BA6RA6C,OA7RA,EA6RA;AACA,aAAAE,WAAA,GAAAF,OAAA,GAAA,CAAA,GAAA,CAAA,GAAAA,OAAA;AACA;AA/RA;AAAA;AAAA,oCAgSA;AACA,eAAA,KAAAE,WAAA,GAAA,KAAA/C,KAAA;AACA;AAlSA;AAAA;AAAA,qCAmSA;AACA,eAAA,KAAA+C,WAAA,GAAA,KAAA9C,MAAA;AACA;AArSA;AAAA;AAAA,8BAuSA+C,aAvSA,EAuSA;AAAA,oCACAA,aAAA,CAAAnD,MAAA,CAAAoD,KAAA,CAAA,GAAA,CADA;AAAA;AAAA,YACAnD,IADA;AAAA,YACAC,GADA;AAAA,YACAmD,KADA;AAAA,YACAC,MADA;;AAEA,YAAAlC,IAAA,GAAA,IAAA7C,IAAA,mBACA4E,aADA;AAEAlD,UAAAA,IAAA,EAAAgD,QAAA,CAAAhD,IAAA,CAFA;AAGAC,UAAAA,GAAA,EAAA+C,QAAA,CAAA/C,GAAA,CAHA;AAIAC,UAAAA,KAAA,EAAA8C,QAAA,CAAAI,KAAA,GAAApD,IAAA,CAJA;AAKAG,UAAAA,MAAA,EAAA6C,QAAA,CAAAK,MAAA,GAAApD,GAAA,CALA;AAMAqD,UAAAA,WAAA,EAAAJ,aAAA,CAAAhE,KANA;AAOAqE,UAAAA,MAAA,EAAAL,aAAA,CAAAhE,KAPA;AAQAsE,UAAAA,WAAA,EAAA,CARA;AASAC,UAAAA,IAAA,EAAA,KAAAC,SAAA,CAAAR,aAAA,CAAAhE,KAAA,EAAA,GAAA;AATA,WAAA;AAYA,aAAAV,IAAA,CAAAmF,OAAA,CAAAxC,IAAA;AACA,aAAAtB,GAAA,CAAAsB,IAAA;AACA;AAvTA;AAAA;AAAA,gCAyTA+B,aAzTA,EAyTA;AAAA,qCACAA,aAAA,CAAAnD,MAAA,CAAAoD,KAAA,CAAA,GAAA,CADA;AAAA;AAAA,YACAnD,IADA;AAAA,YACAC,GADA;AAAA,YACAM,MADA;;AAEA,YAAAY,IAAA,GAAA,IAAAb,MAAA,mBACA4C,aADA;AAEAlD,UAAAA,IAAA,EAAAgD,QAAA,CAAAhD,IAAA,CAFA;AAGAC,UAAAA,GAAA,EAAA+C,QAAA,CAAA/C,GAAA,CAHA;AAIAM,UAAAA,MAAA,EAAAyC,QAAA,CAAAzC,MAAA,CAJA;AAKA+C,UAAAA,WAAA,EAAAJ,aAAA,CAAAhE,KALA;AAMAqE,UAAAA,MAAA,EAAAL,aAAA,CAAAhE,KANA;AAOAsE,UAAAA,WAAA,EAAA,CAPA;AAQAC,UAAAA,IAAA,EAAA,KAAAC,SAAA,CAAAR,aAAA,CAAAhE,KAAA,EAAA,GAAA;AARA,WAAA;AAWA,aAAAV,IAAA,CAAAoF,SAAA,CAAAzC,IAAA;AACA,aAAAtB,GAAA,CAAAsB,IAAA;AACA;AAxUA;AAAA;AAAA,8BA0UA+B,aA1UA,EA0UA;AACA,YAAAW,QAAA,GAAAX,aAAA,CAAAnD,MAAA,CAAAoD,KAAA,CAAA,GAAA,CAAA;AAAA,YACAnD,IAAA,GAAA,MADA;AAAA,YAEAC,GAAA,GAAA,MAFA;AAAA,YAGA6D,CAAA,GAAA,CAHA;AAAA,YAIAC,MAAA,GAAA,EAJA;;AAMA,YAAAF,QAAA,CAAAG,MAAA,GAAA,CAAA,EAAA;AACA,gBAAA,IAAAC,KAAA,CAAA,kBAAA,CAAA;AACA;;AAEA,eAAAH,CAAA,GAAAD,QAAA,CAAAG,MAAA,EAAAF,CAAA,GAAAA,CAAA,GAAA,CAAA,EAAA;AACA,cAAAI,EAAA,GAAA;AAAAC,YAAAA,CAAA,EAAAnB,QAAA,CAAAa,QAAA,CAAAC,CAAA,CAAA,CAAA;AAAAM,YAAAA,CAAA,EAAApB,QAAA,CAAAa,QAAA,CAAAC,CAAA,GAAA,CAAA,CAAA;AAAA,WAAA;AACAC,UAAAA,MAAA,CAAAM,IAAA,CAAAH,EAAA;AAEAlE,UAAAA,IAAA,GAAAsE,IAAA,CAAAC,GAAA,CAAAvE,IAAA,EAAAkE,EAAA,CAAAC,CAAA,CAAA;AACAlE,UAAAA,GAAA,GAAAqE,IAAA,CAAAC,GAAA,CAAAtE,GAAA,EAAAiE,EAAA,CAAAE,CAAA,CAAA;AACA;;AAEA,YAAAjD,IAAA,GAAA,IAAAX,OAAA,CAAAuD,MAAA,oBACAb,aADA;AAEAjD,UAAAA,GAAA,EAAAA,GAFA;AAGAD,UAAAA,IAAA,EAAAA,IAHA;AAIAsD,UAAAA,WAAA,EAAAJ,aAAA,CAAAhE,KAJA;AAKAqE,UAAAA,MAAA,EAAAL,aAAA,CAAAhE,KALA;AAMAsE,UAAAA,WAAA,EAAA,CANA;AAOAC,UAAAA,IAAA,EAAA,KAAAC,SAAA,CAAAR,aAAA,CAAAhE,KAAA,EAAA,GAAA;AAPA,WAAA;AAUA,aAAAV,IAAA,CAAAgG,OAAA,CAAArD,IAAA;AACA,aAAAtB,GAAA,CAAAsB,IAAA;AACA;AAzWA;AAAA;AAAA,gCA2WAsD,GA3WA,EA2WAC,KA3WA,EA2WA;AACA,YAAAC,KAAA,EAAAC,CAAA,EAAAC,CAAA,EAAAC,CAAA,EAAAC,MAAA;;AACA,YAAA,2BAAAC,IAAA,CAAAP,GAAA,CAAA,EAAA;AACAE,UAAAA,KAAA,GAAAF,GAAA,CAAAQ,SAAA,CAAA,CAAA,EAAA9B,KAAA,CAAA,EAAA,CAAA;;AACA,cAAAwB,KAAA,CAAAX,MAAA,KAAA,CAAA,EAAA;AACAW,YAAAA,KAAA,GAAA,CAAAA,KAAA,CAAA,CAAA,CAAA,EAAAA,KAAA,CAAA,CAAA,CAAA,EAAAA,KAAA,CAAA,CAAA,CAAA,EAAAA,KAAA,CAAA,CAAA,CAAA,EAAAA,KAAA,CAAA,CAAA,CAAA,EAAAA,KAAA,CAAA,CAAA,CAAA,CAAA;AACA;;AAEAC,UAAAA,CAAA,GAAA5B,QAAA,CAAA2B,KAAA,CAAA,CAAA,CAAA,GAAAA,KAAA,CAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACAE,UAAAA,CAAA,GAAA7B,QAAA,CAAA2B,KAAA,CAAA,CAAA,CAAA,GAAAA,KAAA,CAAA,CAAA,CAAA,EAAA,EAAA,CAAA;AACAG,UAAAA,CAAA,GAAA9B,QAAA,CAAA2B,KAAA,CAAA,CAAA,CAAA,GAAAA,KAAA,CAAA,CAAA,CAAA,EAAA,EAAA,CAAA;;AAEA,cAAAD,KAAA,EAAA;AACAK,YAAAA,MAAA,GAAA,UAAA,CAAAH,CAAA,EAAAC,CAAA,EAAAC,CAAA,EAAAJ,KAAA,EAAAQ,IAAA,CAAA,IAAA,CAAA,GAAA,GAAA;AACA,WAFA,MAEA;AACAH,YAAAA,MAAA,GAAA,SAAA,CAAAH,CAAA,EAAAC,CAAA,EAAAC,CAAA,EAAAI,IAAA,CAAA,IAAA,CAAA,GAAA,GAAA;AACA;;AACA,iBAAAH,MAAA;AACA;;AACA,cAAA,IAAAd,KAAA,CAAA,SAAA,CAAA;AACA;AA/XA;AAAA;AAAA,gCAiYAkB,KAjYA,EAiYA;AACA3C,QAAAA,OAAA,CAAAC,GAAA,CAAA0C,KAAA;AACA;AAnYA;AAAA;AAAA,8BAqYAA,KArYA,EAqYA;AACA3C,QAAAA,OAAA,CAAAC,GAAA,CAAA0C,KAAA;AACA;AAvYA;AAAA;AAAA,gCAyYAA,KAzYA,EAyYA;AACA3C,QAAAA,OAAA,CAAAC,GAAA,CAAA0C,KAAA;AACA;AA3YA;AAAA;AAAA,+BA6YAA,KA7YA,EA6YA;AACA3C,QAAAA,OAAA,CAAAC,GAAA,CAAA0C,KAAA;AACA;AA/YA;;AAAA;AAAA,IAiRA/G,MAAA,CAAAgH,MAjRA;;AAiZA/G,EAAAA,QAAA,CAAAwE,UAAA,GAAAA,UAAA;AAEA,SAAAxE,QAAA;AACA,CApZA,CAAA","file":"Imagemap.js","sourcesContent":["define(['TYPO3/CMS/Imagemap/Fabric'], (fabric) => {\n\tlet imagemap = imagemap || {};\n\n\tclass Rect extends fabric.Rect {\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\n\t\t\tthis.form = null;\n\t\t\tthis.subForm = null;\n\t\t}\n\n\t\tpostInitializeForm() {\n\t\t\tthis.setValues();\n\t\t\tthis.addEvents();\n\t\t}\n\n\t\tsetValues() {\n\t\t\tthis.subForm.querySelector('#link').value = this.link;\n\t\t\tthis.subForm.querySelector('#label').value = this.alt;\n\t\t\tthis.subForm.querySelector('.colorPreview > div').style.backgroundColor = this.color;\n\t\t}\n\n\t\taddEvents() {\n\t\t\tthis.subForm.querySelectorAll('.t3js-btn').forEach(function (button) {\n\t\t\t\tbutton.addEventListener('click', this[button.id + 'Action'].bind(this));\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tlinkAction() {\n// var area = jQuery(this).parents('.areaForm').data('area'); area.getCanvas().openPopup(this, area);\n\t\t}\n\n\t\tupAction() {\n\t\t}\n\n\t\tdownAction() {\n\t\t}\n\n\t\tundoAction() {\n\t\t}\n\n\t\tredoAction() {\n\t\t}\n\n\t\tdeleteAction() {\n\t\t}\n\n\t\texpandAction() {\n\t\t\tthis.showElement('.moreOptions');\n\t\t\tthis.hideElement('#expand');\n\t\t\tthis.showElement('#collaps');\n\t\t}\n\n\t\tcollapsAction() {\n\t\t\tthis.hideElement('.moreOptions');\n\t\t\tthis.hideElement('#collaps');\n\t\t\tthis.showElement('#expand');\n\t\t}\n\n\t\thideElement(selector) {\n\t\t\tthis.subForm.querySelector(selector).classList.add('hide');\n\t\t}\n\n\t\tshowElement(selector) {\n\t\t\tthis.subForm.querySelector(selector).classList.remove('hide');\n\t\t}\n\n\t\tpersistanceXML() {\n\t\t\tlet coords = this.left + ',' + this.top + ',' + (this.left + this.width) + ',' + (this.height + this.top);\n\t\t\treturn '<area shape=\"rect\" coords=\"' + coords + '\" ' + this.getAdditionalAttributeXML() + '>'\n\t\t\t\t+ this.getLink() + '</area>'\n\t\t}\n\t}\n\n\tclass Circle extends fabric.Circle {\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\n\t\t\tthis.form = null;\n\t\t\tthis.subForm = null;\n\t\t}\n\n\t\tpostInitializeForm() {\n\t\t\tthis.setValues();\n\t\t\tthis.addEvents();\n\t\t}\n\n\t\tsetValues() {\n\t\t\tthis.subForm.querySelector('#link').value = this.link;\n\t\t\tthis.subForm.querySelector('#label').value = this.alt;\n\t\t\tthis.subForm.querySelector('.colorPreview > div').style.backgroundColor = this.color;\n\t\t}\n\n\t\taddEvents() {\n\t\t\tthis.subForm.querySelectorAll('.t3js-btn').forEach(function (button) {\n\t\t\t\tbutton.addEventListener('click', this[button.id + 'Action'].bind(this));\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tlinkAction() {\n// var area = jQuery(this).parents('.areaForm').data('area'); area.getCanvas().openPopup(this, area);\n\t\t}\n\n\t\tupAction() {\n\t\t}\n\n\t\tdownAction() {\n\t\t}\n\n\t\tundoAction() {\n\t\t}\n\n\t\tredoAction() {\n\t\t}\n\n\t\tdeleteAction() {\n\t\t}\n\n\t\texpandAction() {\n\t\t\tthis.showElement('.moreOptions');\n\t\t\tthis.hideElement('#expand');\n\t\t\tthis.showElement('#collaps');\n\t\t}\n\n\t\tcollapsAction() {\n\t\t\tthis.hideElement('.moreOptions');\n\t\t\tthis.hideElement('#collaps');\n\t\t\tthis.showElement('#expand');\n\t\t}\n\n\t\thideElement(selector) {\n\t\t\tthis.subForm.querySelector(selector).classList.add('hide');\n\t\t}\n\n\t\tshowElement(selector) {\n\t\t\tthis.subForm.querySelector(selector).classList.remove('hide');\n\t\t}\n\n\t\tpersistanceXML() {\n\t\t\tlet coords = this.left + ',' + this.top + ',' + this.radius;\n\t\t\treturn '<area shape=\"circle\" coords=\"' + coords + '\" ' + this.getAdditionalAttributeXML() + '>'\n\t\t\t\t+ this.getLink() + '</area>';\n\t\t}\n\t}\n\n\tclass Polygon extends fabric.Polygon {\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\n\t\t\tthis.form = null;\n\t\t\tthis.subForm = null;\n\t\t}\n\n\t\tpostInitializeForm() {\n\t\t\tthis.setValues();\n\t\t\tthis.addEvents();\n\t\t}\n\n\t\tsetValues() {\n\t\t\tthis.subForm.querySelector('#link').value = this.link;\n\t\t\tthis.subForm.querySelector('#label').value = this.alt;\n\t\t\tthis.subForm.querySelector('.colorPreview > div').style.backgroundColor = this.color;\n\t\t}\n\n\t\taddEvents() {\n\t\t\tthis.subForm.querySelectorAll('.t3js-btn').forEach(function (button) {\n\t\t\t\tbutton.addEventListener('click', this[button.id + 'Action'].bind(this));\n\t\t\t}.bind(this));\n\t\t}\n\n\t\tlinkAction() {\n// var area = jQuery(this).parents('.areaForm').data('area'); area.getCanvas().openPopup(this, area);\n\t\t}\n\n\t\tupAction() {\n\t\t}\n\n\t\tdownAction() {\n\t\t}\n\n\t\tundoAction() {\n\t\t}\n\n\t\tredoAction() {\n\t\t}\n\n\t\tdeleteAction() {\n\t\t}\n\n\t\taddAction() {\n\t\t}\n\n\t\texpandAction() {\n\t\t\tthis.showElement('.moreOptions');\n\t\t\tthis.hideElement('#expand');\n\t\t\tthis.showElement('#collaps');\n\t\t}\n\n\t\tcollapsAction() {\n\t\t\tthis.hideElement('.moreOptions');\n\t\t\tthis.hideElement('#collaps');\n\t\t\tthis.showElement('#expand');\n\t\t}\n\n\t\thideElement(selector) {\n\t\t\tthis.subForm.querySelector(selector).classList.add('hide');\n\t\t}\n\n\t\tshowElement(selector) {\n\t\t\tthis.subForm.querySelector(selector).classList.remove('hide');\n\t\t}\n\n\t\tpersistanceXML() {\n\t\t\treturn '<area shape=\"poly\" coords=\"' + this.joinCoords()\n\t\t\t\t+ '\" ' + this.getAdditionalAttributeXML() + \">\" + this.getLink() + \"</area>\"\n\t\t}\n\t}\n\n\tclass AreaForm {\n\t\tconstructor(formElement) {\n\t\t\tthis.element = fabric.document.querySelector('#' + formElement);\n\t\t}\n\n\t\tgetFormElement(selector) {\n\t\t\treturn new DOMParser().parseFromString(\n\t\t\t\tthis.element.querySelector(selector).innerHTML,\n\t\t\t\t'text/html'\n\t\t\t).body.firstChild;\n\t\t}\n\n\t\taddRect(area) {\n\t\t\tarea.form = this;\n\t\t\tarea.subForm = this.getFormElement('#rectForm');\n\n\t\t\tthis.element.insertBefore(area.subForm, this.element.firstChild);\n\t\t\tarea.postInitializeForm();\n\t\t}\n\n\t\taddCircle(area) {\n\t\t\tarea.form = this;\n\t\t\tarea.subForm = this.getFormElement('#circForm');\n\n\t\t\tthis.element.insertBefore(area.subForm, this.element.firstChild);\n\t\t\tarea.postInitializeForm();\n\t\t}\n\n\t\taddPoly(area) {\n\t\t\tarea.form = this;\n\t\t\tarea.subForm = this.getFormElement('#polyForm');\n\t\t\tarea.coordForm = this.getFormElement('#polyCoords');\n\n\t\t\tthis.element.insertBefore(area.subForm, this.element.firstChild);\n\t\t\tarea.postInitializeForm();\n\t\t}\n\n\t\topenPopup(link, area) {\n\t\t\tlink.blur();\n\n\t\t\tlet data = window.imagemap.browseLink;\n\t\t\tdata.objectId = area.getId();\n\t\t\tdata.currentValue = area.getLink();\n\n\t\t\t$.ajax({\n\t\t\t\turl: TYPO3.settings.ajaxUrls['imagemap_browselink_url'],\n\t\t\t\tcontext: area,\n\t\t\t\tdata: data\n\t\t\t}).done(function (response) {\n\t\t\t\tconsole.log(response);\n\t\t\t\tlet vHWin = window.open(response.url, '', 'height=600,width=500,status=0,menubar=0,scrollbars=1'); vHWin.focus()\n\t\t\t});\n\t\t}\n\t}\n\n\tclass AreaEditor extends fabric.Canvas {\n\t\tconstructor(canvas, form, options) {\n\t\t\tsuper (canvas, options);\n\n\t\t\tthis.form = new AreaForm(form);\n\t\t}\n\n\t\tinitializeScaling(scaling) {\n\t\t\tlet width = parseInt(scaling) / this.width,\n\t\t\t\theight = parseInt(scaling) / this.height;\n\t\t\treturn (width > height) ? height : width;\n\t\t}\n\t\tsetScale(scaling) {\n\t\t\tthis.scaleFactor = scaling > 1 ? 1 : scaling;\n\t\t}\n\t\tgetMaxWidth() {\n\t\t\treturn this.scaleFactor * this.width;\n\t\t}\n\t\tgetMaxHeight() {\n\t\t\treturn this.scaleFactor * this.height;\n\t\t}\n\n\t\taddRect(configuration) {\n\t\t\tlet [left, top, right, bottom] = configuration.coords.split(',');\n\t\t\tlet area = new Rect({\n\t\t\t\t...configuration,\n\t\t\t\tleft: parseInt(left),\n\t\t\t\ttop: parseInt(top),\n\t\t\t\twidth: parseInt(right - left),\n\t\t\t\theight: parseInt(bottom - top),\n\t\t\t\tborderColor: configuration.color,\n\t\t\t\tstroke: configuration.color,\n\t\t\t\tstrokeWidth: 1,\n\t\t\t\tfill: this.hexToRgbA(configuration.color, 0.2)\n\t\t\t});\n\n\t\t\tthis.form.addRect(area);\n\t\t\tthis.add(area);\n\t\t}\n\n\t\taddCircle(configuration) {\n\t\t\tlet [left, top, radius] = configuration.coords.split(',');\n\t\t\tlet area = new Circle({\n\t\t\t\t...configuration,\n\t\t\t\tleft: parseInt(left),\n\t\t\t\ttop: parseInt(top),\n\t\t\t\tradius: parseInt(radius),\n\t\t\t\tborderColor: configuration.color,\n\t\t\t\tstroke: configuration.color,\n\t\t\t\tstrokeWidth: 1,\n\t\t\t\tfill: this.hexToRgbA(configuration.color, 0.2)\n\t\t\t});\n\n\t\t\tthis.form.addCircle(area);\n\t\t\tthis.add(area);\n\t\t}\n\n\t\taddPoly(configuration) {\n\t\t\tlet coordsXY = configuration.coords.split(','),\n\t\t\t\tleft = 100000,\n\t\t\t\ttop = 100000,\n\t\t\t\ti = 0,\n\t\t\t\tpoints = [];\n\n\t\t\tif (coordsXY.length % 2) {\n\t\t\t\tthrow new Error('Bad coords count');\n\t\t\t}\n\n\t\t\tfor (; i < coordsXY.length; i = i + 2) {\n\t\t\t\tlet xy = {x: parseInt(coordsXY[i]), y: parseInt(coordsXY[i + 1])};\n\t\t\t\tpoints.push(xy);\n\n\t\t\t\tleft = Math.min(left, xy.x);\n\t\t\t\ttop = Math.min(top, xy.y);\n\t\t\t}\n\n\t\t\tlet area = new Polygon(points, {\n\t\t\t\t...configuration,\n\t\t\t\ttop: top,\n\t\t\t\tleft: left,\n\t\t\t\tborderColor: configuration.color,\n\t\t\t\tstroke: configuration.color,\n\t\t\t\tstrokeWidth: 1,\n\t\t\t\tfill: this.hexToRgbA(configuration.color, 0.2)\n\t\t\t});\n\n\t\t\tthis.form.addPoly(area);\n\t\t\tthis.add(area);\n\t\t}\n\n\t\thexToRgbA(hex, alpha) {\n\t\t\tlet chars, r, g, b, result;\n\t\t\tif (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\n\t\t\t\tchars = hex.substring(1).split('');\n\t\t\t\tif (chars.length === 3) {\n\t\t\t\t\tchars = [chars[0], chars[0], chars[1], chars[1], chars[2], chars[2]];\n\t\t\t\t}\n\n\t\t\t\tr = parseInt(chars[0] + chars[1], 16);\n\t\t\t\tg = parseInt(chars[2] + chars[3], 16);\n\t\t\t\tb = parseInt(chars[4] + chars[5], 16);\n\n\t\t\t\tif (alpha) {\n\t\t\t\t\tresult = 'rgba(' + [r, g, b, alpha].join(', ') + ')';\n\t\t\t\t} else {\n\t\t\t\t\tresult = 'rgb(' + [r, g, b].join(', ') + ')';\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t}\n\t\t\tthrow new Error('Bad Hex');\n\t\t}\n\n\t\tmousedown(event) {\n\t\t\tconsole.log(event);\n\t\t}\n\n\t\tmouseup(event) {\n\t\t\tconsole.log(event);\n\t\t}\n\n\t\tmousemove(event) {\n\t\t\tconsole.log(event);\n\t\t}\n\n\t\tdblclick(event) {\n\t\t\tconsole.log(event);\n\t\t}\n\t}\n\timagemap.AreaEditor = AreaEditor;\n\n\treturn imagemap;\n});\n"]}