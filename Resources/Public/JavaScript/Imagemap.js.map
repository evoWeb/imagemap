{"version":3,"sources":["Imagemap.js"],"names":["define","fabric","imagemap","Rect","AreaEditor","canvas","picture","form","scaling","width","parseInt","imageOrigW","height","imageOrigH","scaleFactor","jQuery","pictureId","getMaxW","getMaxH","that","each","areaObjectList","d","c","areaObjects","setScale","updateCanvas","canvasId","console","log","Canvas"],"mappings":";;;;;;;;;;;;;;;;;;AAAAA,MAAA,CAAA,CAAA,2BAAA,CAAA,EAAA,UAAAC,MAAA,EAAA;AACA,MAAAC,QAAA,GAAAA,QAAA,IAAA,EAAA;;AADA,MAGAC,IAHA;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA,IAGAF,MAAA,CAAAE,IAHA;;AAKAD,EAAAA,QAAA,CAAAC,IAAA,GAAAA,IAAA;;AALA,MAOAC,UAPA;AAAA;AAAA;AAAA;;AAQA,wBAAAC,MAAA,EAAAC,OAAA,EAAAC,IAAA,EAAA;AAAA;;AAAA,qFACAF,MADA,EACAC,OADA,EACAC,IADA;AAEA;;AAVA;AAAA;AAAA,wCAYAC,OAZA,EAYA;AACA,YAAAC,KAAA,GAAAC,QAAA,CAAAF,OAAA,CAAA,GAAA,KAAAG,UAAA;AAAA,YACAC,MAAA,GAAAF,QAAA,CAAAF,OAAA,CAAA,GAAA,KAAAK,UADA;AAEA,eAAAJ,KAAA,GAAAG,MAAA,GAAAA,MAAA,GAAAH,KAAA;AACA;AAhBA;AAAA;AAAA,+BAiBAD,OAjBA,EAiBA;AACA,aAAAM,WAAA,GAAAN,OAAA,GAAA,CAAA,GAAA,CAAA,GAAAA,OAAA;AACAO,QAAAA,MAAA,CAAA,KAAAC,SAAA,GAAA,iBAAA,CAAA,CAAAP,KAAA,CAAA,KAAAQ,OAAA,EAAA;AACAF,QAAAA,MAAA,CAAA,KAAAC,SAAA,GAAA,iBAAA,CAAA,CAAAJ,MAAA,CAAA,KAAAM,OAAA,EAAA;AACAH,QAAAA,MAAA,CAAA,KAAAC,SAAA,CAAA,CAAAP,KAAA,CAAA,KAAAQ,OAAA,EAAA;AACAF,QAAAA,MAAA,CAAA,KAAAC,SAAA,CAAA,CAAAJ,MAAA,CAAA,KAAAM,OAAA,EAAA;AACA,YAAAC,IAAA,GAAA,IAAA;AACAJ,QAAAA,MAAA,CAAAK,IAAA,CAAA,KAAAC,cAAA,EAAA,UAAAC,CAAA,EAAAC,CAAA,EAAA;AACAJ,UAAAA,IAAA,CAAAK,WAAA,CAAAD,CAAA,EAAAE,QAAA,CAAAN,IAAA,CAAAL,WAAA;AACAK,UAAAA,IAAA,CAAAO,YAAA,CAAAH,CAAA;AACA,SAHA;AAIAR,QAAAA,MAAA,CAAA,KAAAY,QAAA,CAAA,CAAAlB,KAAA,CAAA,KAAAQ,OAAA,EAAA,EAAAL,MAAA,CAAA,KAAAM,OAAA,EAAA;AACA;AA7BA;AAAA;AAAA,gCA8BA;AACA,eAAA,KAAAJ,WAAA,GAAA,KAAAH,UAAA;AACA;AAhCA;AAAA;AAAA,gCAiCA;AACA,eAAA,KAAAG,WAAA,GAAA,KAAAD,UAAA;AACA;AAnCA;AAAA;AAAA,uCAqCA;AACA,eAAA,EAAA;AACA;AAvCA;AAAA;AAAA,kCAyCA;AACAe,QAAAA,OAAA,CAAAC,GAAA;AACA;AA3CA;AAAA;AAAA,gCA6CA;AACAD,QAAAA,OAAA,CAAAC,GAAA;AACA;AA/CA;AAAA;AAAA,kCAiDA;AACAD,QAAAA,OAAA,CAAAC,GAAA;AACA;AAnDA;AAAA;AAAA,iCAqDA;AACAD,QAAAA,OAAA,CAAAC,GAAA;AACA;AAvDA;;AAAA;AAAA,IAOA5B,MAAA,CAAA6B,MAPA;;AAyDA5B,EAAAA,QAAA,CAAAE,UAAA,GAAAA,UAAA;AAEA,SAAAF,QAAA;AACA,CA5DA,CAAA","file":"Imagemap.js","sourcesContent":["define(['TYPO3/CMS/Imagemap/Fabric'], (fabric) => {\n\tlet imagemap = imagemap || {};\n\n\tclass Rect extends fabric.Rect {\n\t}\n\timagemap.Rect = Rect;\n\n\tclass AreaEditor extends fabric.Canvas {\n\t\tconstructor(canvas, picture, form) {\n\t\t\tsuper (canvas, picture, form);\n\t\t}\n\n\t\tinitializeScaling(scaling) {\n\t\t\tlet width = parseInt(scaling) / this.imageOrigW,\n\t\t\t\theight = parseInt(scaling) / this.imageOrigH;\n\t\t\treturn (width > height) ? height : width;\n\t\t}\n\t\tsetScale(scaling) {\n\t\t\tthis.scaleFactor = scaling > 1 ? 1 : scaling;\n\t\t\tjQuery(this.pictureId + \" > #image > img\").width(this.getMaxW());\n\t\t\tjQuery(this.pictureId + \" > #image > img\").height(this.getMaxH());\n\t\t\tjQuery(this.pictureId).width(this.getMaxW());\n\t\t\tjQuery(this.pictureId).height(this.getMaxH());\n\t\t\tlet that = this;\n\t\t\tjQuery.each(this.areaObjectList, function (d, c) {\n\t\t\t\tthat.areaObjects[c].setScale(that.scaleFactor);\n\t\t\t\tthat.updateCanvas(c)\n\t\t\t});\n\t\t\tjQuery(this.canvasId).width(this.getMaxW()).height(this.getMaxH())\n\t\t}\n\t\tgetMaxW() {\n\t\t\treturn this.scaleFactor * this.imageOrigW\n\t\t}\n\t\tgetMaxH () {\n\t\t\treturn this.scaleFactor * this.imageOrigH\n\t\t}\n\n\t\tpersistanceXML() {\n\t\t\treturn '';\n\t\t}\n\n\t\tmousedown() {\n\t\t\tconsole.log();\n\t\t}\n\n\t\tmouseup() {\n\t\t\tconsole.log();\n\t\t}\n\n\t\tmousemove() {\n\t\t\tconsole.log();\n\t\t}\n\n\t\tdblclick() {\n\t\t\tconsole.log();\n\t\t}\n\t}\n\timagemap.AreaEditor = AreaEditor;\n\n\treturn imagemap;\n});\n"]}